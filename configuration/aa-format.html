<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width">
<title>AkashaCMS configuration file format</title>
<meta name="pagename" content="AkashaCMS configuration file format">
<meta name="date" content="Wed Apr 05 2017 15:17:57 GMT-0700 (PDT)">
<meta name="DC.title" content="AkashaCMS configuration file format">
<meta name="og:title" content="AkashaCMS configuration file format">
<meta name="og:url" content="https://akashacms.com/configuration/aa-format.html">
<link rel="canonical" href="https://akashacms.com/configuration/aa-format.html">
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
<link rel="stylesheet" type="text/css" href="/akasha/epub-website/style.css"><link rel="stylesheet" type="text/css" href="/vendor/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/vendor/bootstrap/css/bootstrap-theme.min.css"><link rel="stylesheet" type="text/css" href="/readable.min.css"><link rel="stylesheet" type="text/css" href="/style.css">
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=234745903279111";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@akashacms">
<meta name="twitter:creator" content="@7genblogger">
<meta name="twitter:url" content="https://akashacms.com/configuration/aa-format.html">
<meta name="twitter:title" content="AkashaCMS configuration file format">
<meta name="twitter:image" content="http://akashacms.com/logo.gif">
</head>
<body>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
<button class="navbar-toggle" data-toggle="collapse" data-target=".navHeaderCollapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<div class="navbar-collapse collapse navHeaderCollapse">
<ul class="nav navbar-nav navbar-rights">
<li><a href="/index.html">Home</a></li>
<li><a href="/install.html">Installation</a></li>
<li><a href="/configuration/index.html">Configuration</a></li>
<li><a href="/documents/index.html">Documents</a></li>
<li><a href="/plugins/index.html">Plugins</a></li>
<li><a href="/plugins/epub.html">AkashaEPUB</a></li>
<li><a href="/layout/index.html">Layouts</a></li>
<li><a href="/theming/index.html">Theming</a></li>
<li><a href="/deployment/index.html">Deployment</a></li>
<li><a href="/command-line/index.html">Command Line</a></li>
<li><a href="/howto/index.html">Tutorials</a></li>
<li><a href="/news/index.html">Blog</a></li>
<li><a href="/about.html">About</a></li>
</ul>
</div>
</div>
<div class="container" role="main">
<div class="row">
<header class="col-md-12">
<div class="row">
<span class="col-md-8" style="text-align: center">
<a href="/index.html"><img src="/logo.gif" align="left"></a>
<h1 align="center">AkashaCMS configuration file format</h1>
</span>
<span class="col-md-4">
<form action="//www.google.com" id="cse-search-box">
<div>
<input type="hidden" name="cx" value="partner-pub-2401070691062219:4564101022">
<input type="hidden" name="ie" value="UTF-8">
<input type="text" name="q" size="30">
<input type="submit" name="sa" value="Search">
</div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en">
// Not empty
</script>
<br>
</span>
</div>
</header>
</div>
<div class="row">
<div class="col-md-10">
<div class="row">
<section id="breadcrumb" class="col-sm-12">
<div id="breadcrumbTrail">
<ol class="breadcrumb">
<li> <a href="/index.html">AkashaCMS - the powerful static file CMS to build your dream website</a> </li> <li> <a href="/configuration/index.html">Configuring an AkashaCMS website</a> </li> <li> <a href="/configuration/aa-format.html">AkashaCMS configuration file format</a> </li>
</ol>
</div>
</section>
<section id="category-tags" class="col-sm-12">
By: <author-link></author-link> Date: November 21, 2015
</section>
</div>
<div class="row">
<article class="col-sm-10">
<p>Because the AkashaCMS configuration file, <code>config.js</code>, is just a module, it takes this overall form:</p>
<pre><code>var akashacms = require(&apos;akashacms&apos;);
module.exports = akashacms.prepareConfig({
    root_assets: ...
    ... other data objects
});
</code></pre>
<p>The <code>akashacms.prepareConfig</code> function sets up a lot of defaults. You can leave most of these settings out of your <code>config.js</code> and instead use the default directory names.</p>
<p>This object in turn contains other objects, that comprise the configuration data. These are:</p>
<ul>
<li><code>root_assets</code> - An array of directories each of which are simply copied to the output directory, without any processing. This is meant to be used for CSS, JavaScript or image files. Default: <code>[ &apos;assets&apos; ]</code></li>
<li><code>root_layouts</code> - An array of directories each of which contain template files that together determine the overall page layout of the site. Default: <code>[ &apos;layouts&apos; ]</code></li>
<li><code>root_partials</code> - An array of directories each of which contain templates that can be inserted inline anywhere using the function named <code>partial</code>. These templates can be passed a data object that&apos;s then rendered by the template. Default: <code>[ &apos;partials&apos; ]</code></li>
<li><code>root_docs</code> - An array of directories each of which contain the content files, each of which correspond to a URL on the website. Default: <code>[ &apos;documents&apos; ]</code></li>
<li><code>root_out</code> - The output directory into which everything is rendered. Default: <code>out</code></li>
<li><code>root_url</code> - Declares the destination URL of the website. This gets used in various ways. Do not include the final slash - use <code>http://example.com</code> rather than <code>http://example.com/</code></li>
<li><code>deploy_rsync</code> - Data required to configure <code>rsync</code> in the <code>akashacms deploy</code> command. No Default.</li>
<li><code>data</code> - An object that is passed into the rendering of all pages. No Default.</li>
<li><code>headerScripts</code> - Contains data about CSS or JavaScript scripts to add to pages. Plugins can push either into the arrays contained in this object. (see <a href="/documents/css-js.html" title="CSS and JavaScript files for AkashaCMS websites">CSS and JavaScript files for AkashaCMS websites</a>)</li>
<li><code>funcs</code> - A list of functions available to template engines while rendering all pages.</li>
<li><code>config</code> - A function that, if present, is called while configuring AkashaCMS for this site. This lets the site add behavior to AkashaCMS.</li>
<li><code>tags</code> - Configures the generation of per-tag pages created by the akashacms-tagged-content plugin</li>
<li><code>rss</code> - Configures metadata used in RSS feeds generated by AkashaCMS</li>
<li><code>embeddables</code> - Configures the akashacms-embeddables plugin</li>
<li><code>nofollow</code> - Controls which outbound links have <code>rel=nofollow</code> added. It&apos;s an array of regex patterns applied to the hostname of outbound links. If any match, <code>rel=nofollow</code> is added to the link.</li>
<li><code>log4js</code> - Configures logging generated by the log4js package.</li>
</ul>
<p>The big picture operation of AkashaCMS is that it</p>
<ul>
<li>Deletes the existing <code>root_out</code> directory and all contents</li>
<li>Copies the content of all <code>root_assets</code> directories into a newly created <code>root_out</code></li>
<li>Renders each file in each <code>root_docs</code> directory into the <code>root_out</code> directory.</li>
<li>Each of the Document files call on layout templates, or partial templates, to render the page</li>
<li>The <code>data</code> object is available while each page is being rendered.</li>
</ul>
<p>Because <code>root_assets</code>, <code>root_layouts</code> and <code>root_partials</code> are all arrays, AkashaCMS searches for files in each directory in the array in order. The first match wins. That means if several plugins provide a file of a given name, the instance used by the site is the first one found by AkashaCMS. Another plugin, or the site itself, can override those files. For example the bootstrap theme (akashacms-theme-bootstrap) overrides several other partial&apos;s with ones using bootstrap components.</p>
<p>The files in <code>root_layouts</code> provide page layout structure. These can chain together to allow for multiple page layouts. See <a href="../layout/index.html">the layout documentation</a> for more information.</p>
<p>The files in <code>root_partials</code> provide snippets of HTML rendering that can be plopped into the middle of a page anywhere. See <a href="../layout/partials.html">the partials documentation</a> for more information.</p>
<p>After rendering content through any template engines, a final step before writing the content to the <code>root_out</code> directory is to process it with <a href="../documents/mahabhuta.html">the Mahabhuta engine</a>. This provides an jQuery-like API for performing DOM manipulations. It&apos;s powerful enough that one almost does not need the EJS engine.</p>
<p>The <a href="https://github.com/robogeek/akashacms-website/blob/master/config.js">config file for this website</a> should be able to serve as a good example of a config file.</p>
<p>The <a href="https://github.com/robogeek/akashacms-example/blob/master/config.js">config file for the example website</a> is another example <code>config.js</code> file.</p>
<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'akashacms'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
<section id="right" class="col-sm-2">
</section>
</div>
</div>
<div class="col-md-2">
<p>AkashaCMS developed by the author of <a rel="nofollow noskim" href="https://www.amazon.com/gp/product/1785881507/ref=as_li_ss_il?ie=UTF8&amp;fpl=fresh&amp;pf_rd_m=ATVPDKIKX0DER&amp;pf_rd_s=&amp;pf_rd_r=6C1SVA4RRTWPTY7VN1Z2&amp;pf_rd_t=36701&amp;pf_rd_p=14bf09e4-93c8-43ff-8639-e7979e7d1787&amp;pf_rd_i=desktop&amp;linkCode=li2&amp;tag=davidherron-20&amp;linkId=1a83c9a47355206fbe8622bf9e90b086">Node Web Development</a>
</p>
<a rel="nofollow noskim" href="https://www.amazon.com/gp/product/1785881507/ref=as_li_ss_il?ie=UTF8&amp;fpl=fresh&amp;pf_rd_m=ATVPDKIKX0DER&amp;pf_rd_s=&amp;pf_rd_r=6C1SVA4RRTWPTY7VN1Z2&amp;pf_rd_t=36701&amp;pf_rd_p=14bf09e4-93c8-43ff-8639-e7979e7d1787&amp;pf_rd_i=desktop&amp;linkCode=li2&amp;tag=davidherron-20&amp;linkId=1a83c9a47355206fbe8622bf9e90b086" target="_blank"><img border="0" src="//ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1785881507&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=davidherron-20"></a>
<span class="st_sharethis" st_title="AkashaCMS configuration file format">
<span class="st_tumblr_large"></span><span class="st_stumbleupon_large"></span><span class="st_care2_large"></span><span class="st_twitter_large"></span><span class="st_facebook_large"></span><span class="st_yahoo_large"></span><span class="st_blogger_large"></span><span class="st_sharethis_large"></span>
</span>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">
stLight.options({
    
    
    
    
    
    
    
    publisher:'c828d855-27af-4910-b7a5-2b9b14030895'
});
</script>
<a href="http://www.reddit.com/submit" onclick="window.location = &apos;http://www.reddit.com/submit?url=&apos; + encodeURIComponent(window.location); return false"> <img src="http://www.reddit.com/static/spreddit7.gif" alt="submit to reddit" border="0"> </a>
<script type="text/javascript">
(function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js?onload=onLoadCallback';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<g:plusone></g:plusone>
<a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<a href="https://twitter.com/AkashaCMS" rel="me nofollow" class="twitter-follow-button" data-show-count="false">Follow<br>@AkashaCMS</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
</div>
<footer class="row" style="text-align: center; height: 100px">
<div class="fb-like-box" data-href="http://www.facebook.com/Akashacms" data-width="125" data-height="250" data-show-faces="false" data-stream="false" data-header="true"></div>
</footer>
</div>
<script src="/vendor/jquery/jquery.min.js"></script><script src="/vendor/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">
var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37003917-1']);
  _gaq.push(['_setDomainName', 'akashacms.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
