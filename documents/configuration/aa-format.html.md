---
layout: article.html.ejs
title: AkashaCMS configuration file format
rightsidebar:
publicationDate: December 30, 2014
authorname: david
---

Because the AkashaCMS configuration file, `config.js`, is just a module, it takes this overall form:

    module.exports = {
        root_assets: ...
        ... other data objects
    }

This object in turn contains other objects, that comprise the configuration data.  These are:

* `root_assets` - An array of directories each of which are simply copied to the output directory, without any processing.  This is meant to be used for CSS, JavaScript or image files.
* `root_layouts` - An array of directories each of which contain template files that together determine the overall page layout of the site.
* `root_partials` - An array of directories each of which contain templates that can be inserted inline anywhere using the function named `partial`.  These templates can be passed a data object that's then rendered by the template.
* `root_docs` - An array of directories each of which contain the content files, each of which correspond to a URL on the website.
* `root_out` - The output directory into which everything is rendered.
* `root_url` - Declares the destination URL of the website.  This gets used in various ways.  Do not include the final slash - use `http://example.com` rather than `http://example.com/`
* `doMinimize` - Instruct AkashaCMS to minimize the output directory once built.  This is equivalent to the `akashacms minimize` command.  This is ignored currently.
* `deploy_rsync` - Data required to configure `rsync` in the `akashacms deploy` command.
* `data` - An object that is passed into the rendering of all pages.
* `googleAnalyticsAccount` - Contains the site's Google Analytics account ID to generate the correct Analytics code.
* `googleAnalyticsDomain` - The domain name to use with Google Analytics.
* `headerScripts` - Contains data about CSS or JavaScript scripts to add to pages.  Plugins can push either into the arrays contained in this object. (see [](/documents/css-js.html))
* `funcs` - A list of functions available to template engines while rendering all pages.
* `config` - A function that, if present, is called while configuring AkashaCMS for this site.  This lets the site add behavior to AkashaCMS.
* `mahabhuta` - An array of functions called by the Mahabhuta engine to do jQuery/DOM-like manipulations of HTML just before writing page content to disk.
* `tags` - Configures the generation of per-tag pages created by the akashacms-tagged-content plugin
* `rss` - Configures metadata used in RSS feeds generated by AkashaCMS
* `embeddables` - Configures the akashacms-embeddables plugin
* `nofollow` - Controls which outbound links have `rel=nofollow` added.  It's an array of regex patterns applied to the hostname of outbound links.  If any match, `rel=nofollow` is added to the link.
* `log4js` - Configures logging generated by the log4js package.


The big picture operation of AkashaCMS is that it

* Deletes the existing `root_out` directory and all contents
* Copies the content of all `root_assets` directories into a newly created `root_out`
* Renders each file in each `root_docs` directory into the `root_out` directory.
* Each of the Document files call on layout templates, or partial templates, to render the page
* The `data` object is available while each page is being rendered.

Because `root_assets`, `root_layouts` and `root_partials` are all arrays, AkashaCMS searches for files in each directory in the array in order.  The first match wins.  That means if several plugins provide a file of a given name, the instance used by the site is the first one found by AkashaCMS.  Another plugin, or the site itself, can override those files.  For example the bootstrap theme (akashacms-theme-bootstrap) overrides several other partial's with ones using bootstrap components.

The files in `root_layouts` provide page layout structure.  These can chain together to allow for multiple page layouts.  See [the layout documentation](../layout/index.html) for more information.

The files in `root_partials` provide snippets of HTML rendering that can be plopped into the middle of a page anywhere.  See [the partials documentation](../layout/partials.html) for more information.

Each of the functions in the `funcs` object are available inside templates as functions.  See [the template functions documentation](../layout/template-functions.html) for more information.

After rendering content through any template engines, a final step before writing the content to the `root_out` directory is to process it with [the Mahabhuta engine](../documents/mahabhuta.html).  This provides an jQuery-like API for performing DOM manipulations.  It's powerful enough that one almost does not need the EJS engine.

The [config file for this website](https://github.com/robogeek/akashacms-website/blob/master/config.js) should be able to serve as a good example of a config file.
