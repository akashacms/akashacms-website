<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width">


    <title>Configuration files for AkashaEPUB projects</title>





 
 
 
 













<meta name="pagename" content="Configuration files for AkashaEPUB projects">









<meta name="date" content="Sat Oct 26 1985 01:15:00 GMT-0700 (Pacific Daylight Time)">

<meta name="DC.title" content="Configuration files for AkashaEPUB projects">














<!-- OpenGraph Meta Tags -->

<meta name="og:title" content="Configuration files for AkashaEPUB projects">

<meta name="og:url" content="https://akashacms.com/epubtools/4-configuration.html">


































<link rel="canonical" href="https://akashacms.com/epubtools/4-configuration.html">

<link rel="sitemap" type="application/xml" title="Sitemap" href="../sitemap.xml">


<link rel="stylesheet" type="text/css" href="../akasha/epub-website/style.css"><link rel="stylesheet" type="text/css" href="../vendor/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="../pulse.min.css"><link rel="stylesheet" type="text/css" href="../style.css"><link rel="stylesheet" type="text/css" href="../vendor/fontawesome-free/css/all.min.css"><link rel="stylesheet" type="text/css" href="../vendor/highlight.js/styles/tomorrow-night-blue.css">


<style>
#container { padding-top: 5px; }
</style>
</head>
<body class="ebook-page">

    <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark d-print-none">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ebookNavbarContent" aria-controls="ebookNavbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="ebookNavbarContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="ebookNavbarAkashaCMSdropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    AkashaCMS
                    </a>
                    <div class="dropdown-menu" aria-labelledby="ebookNavbarAkashaCMSdropdown">
                        <a class="dropdown-item" href="../index.html">Home</a>
                        <a class="dropdown-item" href="../akasharender/toc.html">AkashaRender</a>
                        <a class="dropdown-item" href="../plugins/index.html">Plugins</a>
                        <a class="dropdown-item" href="../mahabhuta/toc.html">Mahabhuta</a>
                        <a class="dropdown-item" href="toc.html">EPUB Tools</a>
                        <a class="dropdown-item" href="../howto/index.html">How To</a>
                        <a class="dropdown-item" href="../news/index.html">News</a>
                        <a class="dropdown-item" href="../about.html">About</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="ebookNavbarToCdropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Table of Contents
                    </a>
                    <ol type="1" start="1" class="dropdown-menu" aria-labelledby="ebookNavbarToCdropdown">
        <li class="dropdown-item"><a id="introduction" href="1-introduction.html" title="Introduction to AkashaEPUB">Introduction to AkashaEPUB</a></li>
        <li class="dropdown-item"><a id="installation" href="2-installation.html" title="Installing the AkashaEPUB toolchain">Installing the AkashaEPUB toolchain</a></li>
        <li class="dropdown-item"><a id="creating-content" href="3-creating-content.html" title="Creating book content">Creating book content</a>
            <ol>
                <li><a id="chap-3c-content-markup" href="3c-content-markup.html" title="Content markup formats">Content markup formats</a></li>
                <li><a id="chap-3d-rendering" href="3d-rendering.html" title="The AkashaCMS rendering process">The AkashaCMS rendering process</a></li>
                <li><a id="chap-3da-css" href="3da-css.html" title="CSS, Fonts, and Stylesheets for creating good quality EPUB&apos;s">CSS, Fonts, and Stylesheets for creating good quality EPUB&apos;s</a></li>
                <li><a id="chap-3e-html5-structure" href="3e-html5-structure.html" title="Summary of HTML5 markup in AkashaEPUB Documents">Summary of HTML5 markup in AkashaEPUB Documents</a></li>
                <li><a id="chap-3e-internal-links" href="3e-internal-links.html" title="LINK, IMG tags and the requirement for relative URL&apos;s">LINK, IMG tags and the requirement for relative URL&apos;s</a></li>
            </ol>
        </li>
        <li class="dropdown-item"><a id="configuration" href="4-configuration.html" title="Configuration files for AkashaEPUB projects">Configuration files for AkashaEPUB projects</a>
            <ol>
                <li><a id="chap-4a-akasharender-epub" href="4a-akasharender-epub.html" title="Cleaning up non-EPUB constructs with the `akasharender-epub` plugin">Cleaning up non-EPUB constructs with the `akasharender-epub` plugin</a></li>
            </ol>
        </li>
        <li class="dropdown-item"><a id="structure" href="5-structure.html" title="Structuring your book">Structuring your book</a></li>
        <li class="dropdown-item"><a id="building-EPUB" href="6-building-EPUB.html" title="Building an EPUB with AkashaEPUB">Building an EPUB with AkashaEPUB</a>
            <ol>
                <li><a id="chap-6aa-epub-website" href="6aa-epub-website.html" title="Detailed walk-through an embedding EPUB content in an AkashaCMS website">Detailed walk-through an embedding EPUB content in an AkashaCMS website</a></li>
                <li><a id="chap-6b-validation" href="6b-validation.html" title="Validating EPUB files built by AkashaEPUB">Validating EPUB files built by AkashaEPUB</a></li>
            </ol>
        </li>
        <li class="dropdown-item"><a id="akashacms-project" href="7-akashacms-project.html" title="The AkashaCMS Open Source Project">The AkashaCMS Open Source Project</a></li>
        <li class="dropdown-item"><a id="about" href="8-about.html" title="About the author, David Herron">About the author, David Herron</a></li>
        <li class="dropdown-item"><a id="references" href="9-references.html" title="References">References</a></li>
        <li class="dropdown-item"><a id="copyright" href="0a-copyright.html" title="Copyright Notice">Copyright Notice</a></li>
    </ol>
                </li>
                <form class="form-inline" action="//www.google.com" id="cse-search-box">
                    <div>
                    <input type="hidden" name="cx" value="partner-pub-2401070691062219:4564101022">
                    <input type="hidden" name="ie" value="UTF-8">
                    <input type="text" name="q" size="30">
                    <input type="submit" name="sa" value="Search">
                    </div>
                </form>
                <script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en">
                // Not empty
                </script>
            </ul>
        </div>
    </nav>

<div id="container" class="container">

    <header class="epub-website-ebook-masthead" id="ebook-masthead">
  <table border="0"><tr>
      
      <td class="epub-website-ebook-masthead-title">
          
      </td>
  </tr></table>
</header>

    <div class="panel panel-default">
        <div class="panel-heading epub-website-ebook-navigation-header" id="ebook-navigation">



<div class="epub-website-ebook-chapter-area">
<a href="3e-internal-links.html">
    <span class="fas fa-chevron-left" aria-hidden="true" style></span>
    <span class="fas fa-chevron-left" aria-hidden="true" style></span>
    <span class="fas fa-chevron-left" aria-hidden="true" style></span>
    <span class="fas fa-chevron-left" aria-hidden="true" style></span>
</a>

<h1 class="panel-title" align="center" style>Configuration files for AkashaEPUB projects</h1>

<a href="4a-akasharender-epub.html">
    <span class="fas fa-chevron-right" aria-hidden="true" style="display: inline"></span>
    <span class="fas fa-chevron-right" aria-hidden="true" style="display: inline"></span>
    <span class="fas fa-chevron-right" aria-hidden="true" style="display: inline"></span>
    <span class="fas fa-chevron-right" aria-hidden="true" style="display: inline"></span>
</a>
</div>

</div>

        <div id="book-page-content" class="panel-body">
            
            <div id="book-page-content" class="panel-body"><p>Any AkashaCMS project requires two configuration files:</p>
<ul>
<li><code>package.json</code> contains Node.js dependencies, a <code>scripts</code> section for command strings, and various bits of metadata like a project home page or source code repository</li>
<li>The <em>Configuration</em> object, usually in a file named <code>config.js</code>, describing the project to AkashaCMS</li>
</ul>
<p>AkashaEPUB projects have another configuration file:</p>
<ul>
<li>The publishing metadata that&apos;s contained a YAML file typically called <code>book.yml</code>.</li>
</ul>
<p>The primary purpose of this file is documenting the data destined to go into the OPF and NCX files.  Those files are the EPUB metadata files, containing the book title, authors, identifying strings (ISBN etc), the reading order of the files, and more.  Rather than generate those files yourself, this file simplifies your life and <em>epubtools</em> takes care of the details.</p>
<p>In this chapter we&apos;ll go over all three.</p>
<h1>AkashaRender Configuration file and <code>package.json</code></h1>
<p>The configuration of any AkashaRender/AkashaCMS project is split between the Configuration file and the <code>package.json</code>.  The latter is used by <code>npm</code> and the Node.js platform to list package <code>dependencies</code>, the available <code>scripts</code> for performing actions related to the project, and various metadata items like project owner identification or the projects home page.  For an AkashaEPUB project, the <code>scripts</code> section can be used to describe the build process, while the <code>dependencies</code> will list the EPUB-related AkashaCMS plugins.</p>
<p>The Configuration file, typically named <code>config.js</code>, is a Node.js module that produces an AkashaRender <em>Configuration</em> object.  While the Configuration object can be created any way you like, it&apos;s most straightforward to use a <code>config.js</code> file.  There&apos;s nothing special about that file name, and it can be named anything you like.  In fact the project can have multiple Configuration files for different purposes.</p>
<p>More details about AkashaRender project configuration are at: 
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=akashacms.com" style="display: inline-block; padding-right: 2px;" alt="(akashacms.com)">
                    <a href="https://akashacms.com/akasharender/configuration.html" rel="nofollow" target="_blank">https://akashacms.com/akasharender/configuration.html</a></p>
<p>Here&apos;s a couple <code>config.js</code> files for EPUB&apos;s:</p>
<ul>
<li>This book:  
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=github.com" style="display: inline-block; padding-right: 2px;" alt="(github.com)">
                    <a href="https://github.com/akashacms/epub-guide/blob/master/config.js" rel="nofollow" target="_blank">https://github.com/akashacms/epub-guide/blob/master/config.js</a></li>
<li>The EPUB Skeleton: 
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=github.com" style="display: inline-block; padding-right: 2px;" alt="(github.com)">
                    <a href="https://github.com/akashacms/epub-skeleton/blob/master/config.js" rel="nofollow" target="_blank">https://github.com/akashacms/epub-skeleton/blob/master/config.js</a></li>
</ul>
<pre><code class="hljs"><span class="hljs-meta">&apos;use strict&apos;</span>;

<span class="hljs-keyword">const</span> akasha  = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;akasharender&apos;</span>);

<span class="hljs-keyword">const</span> config = <span class="hljs-keyword">new</span> akasha.Configuration();

config
    .addAssetsDir(<span class="hljs-string">&apos;assets&apos;</span>)
    .addLayoutsDir(<span class="hljs-string">&apos;layouts&apos;</span>)
    .addDocumentsDir(<span class="hljs-string">&apos;documents&apos;</span>)
    .addPartialsDir(<span class="hljs-string">&apos;partials&apos;</span>);

config
    .use(<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;akasharender-epub&apos;</span>))
    .use(<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;akashacms-footnotes&apos;</span>));

config.addStylesheet({ <span class="hljs-attr">href</span>: <span class="hljs-string">&quot;/css/style.css&quot;</span> });

config.setMahabhutaConfig({
    <span class="hljs-attr">recognizeSelfClosing</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">recognizeCDATA</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">xmlMode</span>: <span class="hljs-literal">true</span>
});

config.prepare();

<span class="hljs-built_in">module</span>.exports = config;
</code></pre>
<p>This is a fairly simple configuration file.  They can grow to be rather complex depending on your needs.  We pull in the <code>akasharender</code> module, then instantiate a Configuration object, call some methods, and assign the object to <code>module.exports</code>.  The last step makes the Configuration object available to AkashaRender.</p>
<p>The first set of methods, <code>addAssetsDir</code> and the others, inform AkashaRender what directories to use for certain purposes.  For more on this see <a href="5-structure.html" title="Structuring your book">Structuring your book</a></p>
<p>The second set informs AkashaRender the AkashaCMS plugins to use with the <code>use</code> method.  The <code>use</code> call is given the Plugin object resulting from <code>require(&quot;plugin-name&quot;)</code>, describing the plugin to AkashaRender.  Used this way, there must be a corresponding entry in <code>package.json</code> for each Plugin so that <code>npm</code> can easily download the dependencies required to build the book.</p>
<p>An AkashaCMS plugin will modify AkashaRender&apos;s execution to add new capabilities.  Typically a plugin will add a Partials directory, and add new custom DOM processing and custom tag functions using the Mahabhuta DOM-processing engine.  The two plugins listed here are especially useful for EPUB&apos;s, namely:</p>
<ul>
<li><code>akasharender-epub</code> contains various cleanup&apos;s required because of EPUB3 limitations.</li>
<li><code>akashacms-footnotes</code> provides a simple way to generate a list of footnotes at the bottom of the page.</li>
</ul>
<p>With <code>addStylesheet</code> we declare a CSS file to use in every page.</p>
<p>When the <code>&lt;link id=&quot;stylesheet&quot; href=&quot;/css/style.css&quot; type=&quot;text/css&quot;/&gt;</code> tag is generated, AkashaEPUB will automatically rewrite the <code>href</code> attribute to the correct relative URL.</p>
<p>With <code>setMahabhutaConfig</code> we describe the HTML rendering output.  We have to specify <code>xmlMode: true</code> because EPUB3 requires XHTML files.</p>
<p>Likely package dependency entries in <code>package.json</code>:</p>
<pre><code class="hljs"><span class="hljs-string">&quot;dependencies&quot;</span>: {
    <span class="hljs-string">...</span>
    <span class="hljs-string">&quot;akashacms-footnotes&quot;</span>: <span class="hljs-string">&quot;&gt;=0.6&quot;</span>,
    <span class="hljs-string">&quot;akasharender-epub&quot;</span>: <span class="hljs-string">&quot;akashacms/akasharender-epub&quot;</span>,
    <span class="hljs-string">&quot;mahabhuta&quot;</span>: <span class="hljs-string">&quot;&gt;=0.6.3&quot;</span>,
    <span class="hljs-string">&quot;akasharender&quot;</span>: <span class="hljs-string">&quot;&gt;=0.6&quot;</span>,
    <span class="hljs-string">&quot;epubtools&quot;</span>: <span class="hljs-string">&quot;&gt;=0.3&quot;</span>,
    <span class="hljs-string">&quot;globfs&quot;</span>: <span class="hljs-string">&quot;*&quot;</span>
    <span class="hljs-string">...</span>
}
</code></pre>
<h1>Publishing metadata - <code>book.yaml</code></h1>
<p>The third configuration file is used by <em>epubtools</em> and contains the metadata required for the XML files (OPF and NCX) that are tucked inside the EPUB.  What <em>epubtools</em> does is to automatically generate those XML files for you from data it gathers from the content files and from this metadata file.</p>
<p>This <code>book.yaml</code> is from the EPUB Skeleton project 
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=github.com" style="display: inline-block; padding-right: 2px;" alt="(github.com)">
                    <a href="https://github.com/akashacms/epub-skeleton/blob/master/book.yml" rel="nofollow" target="_blank">https://github.com/akashacms/epub-skeleton/blob/master/book.yml</a></p>
<pre><code class="hljs"><span class="hljs-attribute">opf</span>: skeleton.opf
<span class="hljs-attribute">epub</span>: skeleton.epub

<span class="less"><span class="hljs-attribute">title</span>: Skeletal AkashaEPUB book
<span class="hljs-attribute">languages</span>: [ en ]
<span class="hljs-attribute">identifiers</span>:
    - <span class="hljs-attribute">unique</span>: true
      <span class="hljs-attribute">uuid</span>: <span class="hljs-string">&quot;b624d2ee-e88a-11e4-b0db-376a7655914b&quot;</span>
<span class="hljs-attribute">published</span>:
    <span class="hljs-attribute">date</span>: <span class="hljs-string">&quot;2017-07-06T22:15:14Z&quot;</span>
<span class="hljs-attribute">creators</span>:
    - <span class="hljs-attribute">id</span>: author
      <span class="hljs-attribute">name</span>: John Smith
      <span class="hljs-attribute">nameReversed</span>: Smith, John
<span class="hljs-attribute">publisher</span>: AkashaCMS.COM
<span class="hljs-attribute">subjects</span>: [ <span class="hljs-string">&quot;Reference&quot;</span> ]
<span class="hljs-attribute">rights</span>: <span class="hljs-string">&quot;Public Domain&quot;</span>

<span class="hljs-attribute">cover</span>:
    <span class="hljs-attribute">writeHtml</span>: { <span class="hljs-attribute">id</span>: <span class="hljs-string">&quot;cover&quot;</span>, <span class="hljs-attribute">href</span>: <span class="hljs-string">&quot;cover.html&quot;</span> }
    <span class="hljs-attribute">idImage</span>: <span class="hljs-string">&quot;cover-image&quot;</span>
    <span class="hljs-attribute">src</span>:  <span class="hljs-string">&quot;images/Human-Skeleton.jpg&quot;</span>
    <span class="hljs-attribute">alt</span>:  <span class="hljs-string">&quot;AkashaEPUB Skeleton Book&quot;</span>
    <span class="hljs-attribute">type</span>: <span class="hljs-string">&quot;image/jpeg&quot;</span>

<span class="hljs-attribute">toc</span>: { <span class="hljs-attribute">id</span>: <span class="hljs-string">&quot;toc&quot;</span>, <span class="hljs-attribute">href</span>: <span class="hljs-string">&quot;toc.html&quot;</span> }
<span class="hljs-attribute">ncx</span>: { <span class="hljs-attribute">id</span>: <span class="hljs-string">&quot;ncx&quot;</span>, <span class="hljs-attribute">href</span>: <span class="hljs-string">&quot;toc.ncx&quot;</span>  }
</span></code></pre>
<p>The entries should be fairly self-explanatory.  We&apos;ll go over these in more detail in the following sections.</p>
<h2>What is YAML?</h2>
<p>The YAML format is a powerful-but-simple text format for encoding richly structured data.  Think of it as JSON or XML without all the curly braces or angle brackets.  We&apos;ll quickly go over the YAML format and in later sections go over specific data items.  The YAML page on Wikipedia (
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=en.wikipedia.org" style="display: inline-block; padding-right: 2px;" alt="(en.wikipedia.org)">
                    <a href="https://en.wikipedia.org/wiki/YAML" rel="nofollow" target="_blank">https://en.wikipedia.org/wiki/YAML</a>) is the best documentation I&apos;ve found on YAML.</p>
<p>An object is declared using a <code>name: value</code> structure.  For string objects the quotation marks are optional.</p>
<p>An array of items is declared using square brackets: <code>name: [ value1, value2, value3 ]</code></p>
<p>An object with named elements is declared with subsidiary <code>name: value</code> items.  There are several ways to write such objects:</p>
<pre><code class="hljs"><span class="hljs-attribute">name</span>:
    <span class="hljs-attribute">id</span>: <span class="hljs-string">&quot;someId&quot;</span>
    <span class="hljs-attribute">title</span>: The Title String

<span class="hljs-attribute">name</span>: { <span class="hljs-attribute">id</span>: <span class="hljs-string">&quot;someId&quot;</span>, <span class="hljs-attribute">title</span>: <span class="hljs-string">&quot;The Title String&quot;</span> }
</code></pre>
<p>Generally YAML does the right thing with converting the text content of a tag into a string.  Sometimes you need to use special characters in tag content that will confuse YAML.  For example:</p>
<pre><code class="hljs"><span class="hljs-attribute">name</span>:
    <span class="hljs-attribute">title</span>: The Good, the Bad and The <span class="hljs-attribute">Ugly</span>: a Retrospective
</code></pre>
<p>That <code>:</code> character will cause YAML to become confused.  In such a case it&apos;s necessary to put quotes around the text:</p>
<pre><code class="hljs"><span class="hljs-symbol">name:</span>
<span class="hljs-symbol">    title:</span> <span class="hljs-string">&quot;The Good, the Bad and The Ugly: a Retrospective&quot;</span>
</code></pre>
<p>A similar issue is that if YAML see&apos;s a string of numbers, it assumes the field value to be numerical.  If instead the field value is, say, a product ID where leading 0&apos;s are important, it&apos;s necessary to throw quote&apos;s around the field value so that YAML treats it as a string rather than a number.</p>
<p>Finally, a list of items is declared using a <code>-</code> character to denote the beginning of each item:</p>
<pre><code class="hljs"><span class="hljs-selector-tag">name</span>:
    <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">item1</span>
    <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">item2</span>

<span class="hljs-selector-tag">list</span>:
    <span class="hljs-selector-tag">-</span> { <span class="hljs-attribute">id</span>: <span class="hljs-string">&quot;id1&quot;</span>, title: <span class="hljs-string">&quot;The Title String&quot;</span> }
    <span class="hljs-selector-tag">-</span> { <span class="hljs-attribute">id</span>: <span class="hljs-string">&quot;id2&quot;</span>, title: <span class="hljs-string">&quot;Another Title String&quot;</span> }
</code></pre>
<h2>EPUB Metadata files</h2>
<p>The metadata you enscribe in your book project is used to generate various metadata files and packaging every required file into the EPUB file.  EPUB files are just ZIP files with a <code>.epub</code> extension, containing certain files as described in the EPUB3 specification.</p>
<p>The types of files AkashaEPUB can currently generate are:</p>
<ul>
<li><code>mimetype</code> - simple text file containing the required MIME type of the EPUB book.</li>
<li><code>OPF</code> - The Open Package Format file which indexes every file in the EPUB container, as well as metadata about the book.  OPF is new to EPUB3, and supplants the NCX file.</li>
<li><code>NCX</code> - The older package index file which, while it has been deprecated by EPUB3, is still useful because many EPUB readers still look in this file for the Table of Contents.</li>
<li><code>HTML Navigation Document</code> - An HTML page containing the Table of Contents, with navigation markup specified in EPUB3.</li>
<li><code>META-INF/container.xml</code> - Informs the EPUB software where to find the <code>ebook.opf</code></li>
</ul>
<p>The EPUB3 specification supports some additional files.  At this time AkashaEPUB does not generate those files.</p>
<h2>Names of generated files</h2>
<p>Let&apos;s now look at the first segment of the <code>book.yml</code> configuration.</p>
<p>There are two files where you, the author of your EPUB, need to tell AkashaEPUB the file names to use:</p>
<pre><code class="hljs"><span class="hljs-symbol">opf:</span> skeleton.opf
<span class="hljs-symbol">epub:</span> skeleton.epub
</code></pre>
<p>The <code>opf</code> member controls the file name for the OPF file.  That file name is squirted into <code>META-INF/container.xml</code> so that EPUB readers know where to find the file.</p>
<p>The <code>epub</code> member controls the file name of the generated EPUB file.</p>
<p>If you don&apos;t specify these, the following will be used:</p>
<pre><code class="hljs"><span class="hljs-symbol">opf:</span> <span class="hljs-string">&quot;ebook.opf&quot;</span>
<span class="hljs-symbol">epub:</span> <span class="hljs-string">&quot;ebook.epub&quot;</span>
</code></pre>
<h2>Generating an NCX file</h2>
<p>The NCX file is optional.  While the EPUB3 specification says not to use NCX files, many EPUB readers still look for this file.  Some of us will find it useful to generate an NCX file into the EPUB.</p>
<p>The NCX file carries both metadata and a content index, organized to convey the chapter/sub-chapter structure.</p>
<p>To cause AkashacmsEPUB to generate the NCX file, add the following to the <code>book.yml</code> file:</p>
<pre><code class="hljs"><span class="hljs-selector-tag">toc</span>: { <span class="hljs-attribute">id</span>: <span class="hljs-string">&quot;toc&quot;</span>, href: <span class="hljs-string">&quot;toc.html&quot;</span> }
<span class="hljs-selector-tag">ncx</span>: { <span class="hljs-attribute">id</span>: <span class="hljs-string">&quot;ncx&quot;</span>, href: <span class="hljs-string">&quot;toc.ncx&quot;</span>  }
</code></pre>
<p>We&apos;ll discuss Table of Contents generation in more detail in a future chapter - <a href="5-structure.html" title="Structuring your book">Structuring your book</a>.</p>
<p>If the <code>ncx</code> member is present, the NCX file is generated.  It&apos;s name within the EPUB will be the value of the <code>href</code> field.</p>
<h2>Title &amp; Languages</h2>
<p>The <code>title</code> member, of course, holds the Book Title.</p>
<p>The <code>languages</code> member specifies which language (or languages) in which the book is written.  Books can, and sometimes are, written in multiple languages, so simply list what&apos;s appropriate.  The language codes are taken from RFC5646 (
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=www.ietf.org" style="display: inline-block; padding-right: 2px;" alt="(www.ietf.org)">
                    <a href="http://www.ietf.org/rfc/rfc5646.txt" rel="nofollow" target="_blank">www.ietf.org/rfc/rfc5646.txt</a>]) and might look like this for a book written in both English and French.</p>
<pre><code class="hljs">title: Skeletal AkashaEPUB book
<span class="hljs-keyword">language</span><span class="hljs-variable">s:</span> [ <span class="hljs-keyword">en</span>, fr ]
</code></pre>
<h2>Identifiers</h2>
<p>While the ISBN is the primary system for identifying books, it&apos;s not the only game in town.  For many important uses one doesn&apos;t even need an ISBN depending on how the book is being distributed.</p>
<p>Generally speaking an <strong>identifier</strong> is a unique (hopefully) text string assigned to a specific book.  While that&apos;s seemingly simple, it&apos;s a little tricky in practice.  Book identifiers play different roles in different scenarios.</p>
<p>The ISBN is a product identifier.  The publisher doesn&apos;t have to acquire a new ISBN for minor revisions, but it is required to do so for a completely new edition.  The publisher also must acquire an ISBN for each format the book is published in.  In other words, the product identifier is how book distributors and stores distinguish one physical book from another.  The key word is <em>physical</em> because ISBN&apos;s purpose is primarily controlling inventory of printed books in warehouses and bookstores.  It&apos;s widely thought eBook do not require an ISBN, but of course you should check with an authoritative source on this.</p>
<p>The product identifier is useful for book distributors, but it doesn&apos;t tell us whether two versions of an electronic book are bit-for-bit identical.</p>
<p>The EPUB3 committee settled on two identifiers that together satisfy both the need for a product identifier, and a bit-for-bit identicalness identifier.  Over the next few paragraphs we&apos;ll go over how to represent this in AkashaEPUB.</p>
<p>Consider:</p>
<pre><code class="hljs"><span class="hljs-attr">identifiers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">unique:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">uuid:</span> <span class="hljs-string">&quot;b624d2ee-e88a-11e4-b0db-376a7655914b&quot;</span>
</code></pre>
<p>The <code>identifiers</code> list contains product identifiers.  An EPUB can have multiple identifiers, hence we support more than one.  However, only one of them can be the unique identifier for the EPUB.  The <code>unique</code> attribute is required on one and only one of these identifiers.  It can have any value you wish, it just needs to be present.</p>
<p>The supported identifier formats are:</p>
<ul>
<li><code>uuid</code> or Unique Universal ID.  The format is simply a UUID string.</li>
<li><code>urn</code> or Universal Resource Notation.  There are many other URN formats to use.</li>
</ul>
<p>The example shows use of a UUID.  Under the covers it is converted to the correct format in the OPF file.  Generating a UUID string is fairly easy and there are many available applications that correctly generate a UUID.</p>
<figure>
<img src="images/uuid-generator.png">
<figcaption>The jrUUID application for Mac OS X</figcaption>
</figure>
<p>Several open source tools to generate UUID&apos;s are in the npm registry.  Simply follow these steps:</p>
<pre><code class="hljs">$ npm install uuid --save
epub-<span class="hljs-symbol">guide@</span><span class="hljs-number">0.6</span><span class="hljs-number">.1</span> /Users/david/akasharender/epub-guide
&#x2514;&#x2500;&#x2500; <span class="hljs-symbol">uuid@</span><span class="hljs-number">3.1</span><span class="hljs-number">.0</span>
$ ./node_modules/.bin/uuid
f1e90602<span class="hljs-number">-9f</span>7c<span class="hljs-number">-4f</span>52-a8a5<span class="hljs-number">-6</span>de10ea0988e
</code></pre>
<p>The UID printed by the tool can be inserted into <code>book.yml</code> as so:</p>
<pre><code class="hljs"><span class="hljs-attr">identifiers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">unique:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">uuid:</span> <span class="hljs-string">&quot;D4C91B0C-33C0-4E00-810A-E4C2D8CD4BAE&quot;</span>
</code></pre>
<p>By specifying <code>urn</code> you can use any URN (uniform resource name - 
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=en.wikipedia.org" style="display: inline-block; padding-right: 2px;" alt="(en.wikipedia.org)">
                    <a href="https://en.wikipedia.org/wiki/Uniform_resource_name" rel="nofollow" target="_blank">en.wikipedia.org/wiki/Uniform_resource_name</a>) as an identifier.  URN&apos;s are similar in purpose and format to a URL.  Instead of specifying an address of a page on the Web a URN more generally gives a unique name to a &quot;resource&quot;, like a book.  The Wikipedia page has some good examples.  The URN prefix tells us what kind of resource name it is, in this case an ISBN.  For our purposes in building EPUB&apos;s there are approximately three URN formats of interest:</p>
<ul>
<li>DOI: <code>urn:doi:....</code> -- Digital Object Identifier</li>
<li>ISBN: <code>urn:isbn:123456789X</code> -- This is the standard identifier string for books, the international standard book number</li>
<li>UUID: <code>urn:uuid:6e8bc430-9c3a-11d9-9669-0800200c9a66</code> -- This is just a string of self-assigned numbers that you guarantee is a unique universal identifying number.</li>
</ul>
<p>The ISBN number system is controlled by the International ISBN Agency (
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=www.isbn-international.org" style="display: inline-block; padding-right: 2px;" alt="(www.isbn-international.org)">
                    <a href="https://www.isbn-international.org/" rel="nofollow" target="_blank">www.isbn-international.org/</a>), through regional ISBN agencies.  Publishers or authors can acquire ISBN numbers through the agency for their country or region.  Some say that ISBN&apos;s are unnecessary for electronic books, and indeed none of the e-book marketplaces require an ISBN.  If you&apos;ve acquired an ISBN for your book, use it in the method shown above.</p>
<p>If you must generate an NCX file, and if your NCX file has to carry a different identifier than the OPF file, do this:</p>
<pre><code class="hljs"><span class="hljs-attribute">identifiers</span>:
    - <span class="hljs-attribute">unique</span>: true
      <span class="hljs-attribute">urn</span>: <span class="hljs-string">&quot; .... one identifier&quot;</span>
      <span class="hljs-attribute">ncxidentifier</span>: <span class="hljs-string">&quot; ... another identifier&quot;</span>
</code></pre>
<p>If you do this, the epubcheck program (see <a href="6b-validation.html" title="Validating EPUB files built by AkashaEPUB">Validating EPUB files built by AkashaEPUB</a>) will give you a WARNING that the OPF and NCX identifiers should be equal.</p>
<p>So far we&apos;ve talked about the publication identifier, and promised to discuss a second identifier that&apos;s used for bit-for-bit identicalness.  Now&apos;s the time to do so.</p>
<p>The method chosen by the EPUB3 committee was to use the <code>date</code> metadata value.  By gluing together the publishing identifier just discussed, and the publishing date, an EPUB reader can tell one EPUB from another.  One simply must be sure to generate a new publishing date each time the EPUB is generated.</p>
<p>The EPUB&apos;s publishing date is specified as so</p>
<pre><code class="hljs"><span class="hljs-built_in">date</span>: <span class="hljs-string">&quot;2015-02-21T00:00:00Z&quot;</span>
</code></pre>
<p>The date string most conform to the W3C date format, as shown here.  This <code>date</code> attribute fills in the <code>dc:date</code> element in the OPF metadata.  Another date field, the <code>dcterms:modified</code> element, is automatically generated by AkashaEPUB to indicate the exact time the EPUB was built.  If you do not provide a <code>date</code>, it is generated for you.</p>
<h2>Creators and Contributors</h2>
<p>The <code>creators</code> member lists all the authors (creators) of the document.</p>
<pre><code class="hljs"><span class="hljs-attribute">creators</span>:
    - <span class="hljs-attribute">id</span>: author
      <span class="hljs-attribute">name</span>: John Smith
      <span class="hljs-attribute">nameReversed</span>: Smith, John
</code></pre>
<p>List one per &quot;creator&quot;.  The <code>name</code> and <code>nameReversed</code> field takes care of different ways the name is presented in different systems.  Additional fields can be given to refine the data.   You can also list <code>contributors</code> whose role was less significant.</p>
<pre><code class="hljs"><span class="hljs-attribute">contributors</span>:
    - <span class="hljs-attribute">id</span>: contrib1
      <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;John Smith&quot;</span>
      <span class="hljs-attribute">nameReversed</span>: <span class="hljs-string">&quot;Smith, John&quot;</span>
</code></pre>
<h2>Other metadata</h2>
<p>The <code>publisher</code> member gives the name of the publisher.  This is simply the proper name for the publisher.</p>
<p>The <code>subjects</code> member gives an array of keyphrases or keywords describing the topic or topics covered in the book.</p>
<p>The <code>rights</code> member is a statement of intellectual property rights held over the document.  For example: &quot;Copyright 2015, David Herron&quot;.</p>
<p>The <code>source</code> member is used when an EPUB was derived from another source publication, such as a print version of a book.  Use the Identifier of that other publication.</p>
</div>
            


            <div class="panel-heading epub-website-ebook-navigation-header" id="ebook-navigation-bottom">



<div class="epub-website-ebook-chapter-area">
<a href="3e-internal-links.html">
    <span class="fas fa-chevron-left" aria-hidden="true" style></span>
    <span class="fas fa-chevron-left" aria-hidden="true" style></span>
    <span class="fas fa-chevron-left" aria-hidden="true" style></span>
    <span class="fas fa-chevron-left" aria-hidden="true" style></span>
</a>

<h1 class="panel-title" align="center" style>Configuration files for AkashaEPUB projects</h1>

<a href="4a-akasharender-epub.html">
    <span class="fas fa-chevron-right" aria-hidden="true" style="display: inline"></span>
    <span class="fas fa-chevron-right" aria-hidden="true" style="display: inline"></span>
    <span class="fas fa-chevron-right" aria-hidden="true" style="display: inline"></span>
    <span class="fas fa-chevron-right" aria-hidden="true" style="display: inline"></span>
</a>
</div>

</div>

            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'akashacms'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the 
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=disqus.com" style="display: inline-block; padding-right: 2px;" alt="(disqus.com)">
                    <a href="https://disqus.com/?ref_noscript" rel="nofollow" target="_blank">comments powered by Disqus.</a></noscript>

                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=disqus.com" style="display: inline-block; padding-right: 2px;" alt="(disqus.com)">
                    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow" target="_blank">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
    <footer id="footer-row" class="container">
    

<a rel="nofollow noskim" href="https://www.amazon.com/gp/product/1785881507/ref=as_li_ss_il?ie=UTF8&amp;fpl=fresh&amp;pf_rd_m=ATVPDKIKX0DER&amp;pf_rd_s=&amp;pf_rd_r=6C1SVA4RRTWPTY7VN1Z2&amp;pf_rd_t=36701&amp;pf_rd_p=14bf09e4-93c8-43ff-8639-e7979e7d1787&amp;pf_rd_i=desktop&amp;linkCode=li2&amp;tag=davidherron-20&amp;linkId=1a83c9a47355206fbe8622bf9e90b086" target="_blank"><img border="0" src="https://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1785881507&amp;Format=_SL250_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=techsparx-20" width="175"></a>

<a rel="nofollow noskim" href="https://www.amazon.com/Asynchronous-Node-js-JavaScript-Promises-Generators-ebook/dp/B01N2Z4SOR/ref=as_li_ss_tl?ie=UTF8&amp;qid=1498526267&amp;sr=8-1&amp;keywords=asynchronous+javascript+promises+generators&amp;linkCode=ll1&amp;tag=techsparx-20&amp;linkId=0b8a5dc44c97bf8eb8452dac15ae724b" target="_blank"><img border="0" src="https://techsparx.com/nodejs/img/es-2015-16-17-promises-generators-and-async-await-2-1000.jpg" width="175"></a>

<a rel="nofollow noskim" href="https://www.amazon.com/Creating-eBooks-Markdown-Source-Tools-ebook/dp/B00WTKDH72/ref=as_li_ss_tl?_encoding=UTF8&amp;psc=1&amp;refRID=4SGHASEAZJKJBV0G60R0&amp;linkCode=ll1&amp;tag=techsparx-20&amp;linkId=941071a7b25f067767f82a7b11c06968" target="_blank"><img border="0" src="https://techsparx.com/nodejs/img/create-ebook-cover.jpg" width="175"></a>

    
<div class="fb-like-box" data-href="http://www.facebook.com/Akashacms" data-width="125" data-height="250" data-show-faces="false" data-stream="false" data-header="true"></div>

    </footer>
</div>

<script src="../vendor/jquery/jquery.min.js"></script><script src="../vendor/popper.js/umd/popper.min.js"></script><script src="../vendor/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37003917-1']);
  _gaq.push(['_setDomainName', 'akashacms.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- partial file-name="piwik_analytics.html"></partial -->


</body>
</html>
