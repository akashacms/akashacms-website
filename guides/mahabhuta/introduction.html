<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width">
<title>Introduction</title>
<meta name="pagename" content="Introduction">
<meta name="date" content="Sat Dec 03 2016 22:08:52 GMT-0800 (PST)">
<meta name="DC.title" content="Introduction">
<meta name="og:title" content="Introduction">
<meta name="og:url" content="https://akashacms.com/guides/mahabhuta/introduction.html">
<link rel="canonical" href="https://akashacms.com/guides/mahabhuta/introduction.html">
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
<link rel="stylesheet" type="text/css" href="/vendor/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/vendor/bootstrap/css/bootstrap-theme.min.css"><link rel="stylesheet" type="text/css" href="/readable.min.css"><link rel="stylesheet" type="text/css" href="/style.css">
<style>
html, body {
    height:100%;
    max-height:100%;
    margin:0;
}

#page-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
}

#site-navbar {
    display: none;
    flex-shrink: 0;
    height: 30px;
}

#ebook-masthead {
    flex-shrink: 0;
    height: 60px;
}

#ebook-masthead h2 {
    font-size: 22px;
    margin-top: 0px;
}

#ebook-navigation {
    flex-shrink: 0;
    height: 60px;
}

#book-page-content {
    flex-grow: 1;
    overflow: auto;
    min-height: 2em;
}

#footer-row {
    display: none;
    flex-shrink: 0;
    height: 50px;
    background-color: grey;
}
</style>
</head>
<body class="ebook-page">
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
<button class="navbar-toggle" data-toggle="collapse" data-target=".navHeaderCollapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<div class="navbar-collapse collapse navHeaderCollapse">
<ul class="nav navbar-nav navbar-rights">
<li><a href="/index.html">Home</a></li>
<li><a href="/install.html">Installation</a></li>
<li><a href="/configuration/index.html">Configuration</a></li>
<li><a href="/documents/index.html">Documents</a></li>
<li><a href="/plugins/index.html">Plugins</a></li>
<li><a href="/plugins/epub.html">AkashaEPUB</a></li>
<li><a href="/layout/index.html">Layouts</a></li>
<li><a href="/theming/index.html">Theming</a></li>
<li><a href="/deployment/index.html">Deployment</a></li>
<li><a href="/command-line/index.html">Command Line</a></li>
<li><a href="/howto/index.html">Tutorials</a></li>
<li><a href="/news/index.html">Blog</a></li>
<li><a href="/about.html">About</a></li>
</ul>
</div>
</div>
<div id="page-container">
<ebook-page-header id="ebook-masthead" header-height="60px"></ebook-page-header>
<div class="panel panel-default">
<ebook-navigation-header id="ebook-navigation" class="panel-heading"></ebook-navigation-header>
<div id="book-page-content" class="panel-body">
<div id="book-page-content" class="panel-body"><p>Back in 2011 when I was first learning about Node.js, I came across a video/talk by an excited Yahoo engineer. He talked about the awesome power of server-side DOM-based processing of HTML before sending the page to the browser. The claim is that by doing most of the page assembly on the server overall performance is improved -- the server has better bandwidth to the supporting services to retrieve content to render, and therefore all the round-trips to gather that stuff runs more quickly on the server than in a browser. Especially when that browser is in the middle of a farm field in the boondocks.</p>
<p>Two clues tell us his idea doesn&apos;t seem to have taken off. First, the typical Node.js server-side framework is based on template processing, not DOM processing. Second, many think it&apos;s way-cool to deliver JavaScript to the browser and have the browser make server requests for data used to construct the page.</p>
<p>I have troubles with both ideas. First, template processing is not very precise in that what we&apos;re constructing is an HTML DOM tree represented by text. The fact that it looks like text leads us to a mistaken belief we should use text processing techniques. The HTML is actually a DOM object structure masquerading as text, and we should act on it with software that treats it as objects. Second, I find the server-side-is-faster argument to be compelling. Compelling enough to have developed Mahabhuta.</p>
<p>The name? &quot;Mahabhuta&quot; is the Sanskrit name for the five elements, with Akasha being one of those elements. The Mahabhuta engine deals with HTML Elements, so it seems like a fitting name. Mahabhuta was originally developed for AkashaCMS, hence the association. It can be used by other software.</p>
<p>The Mahabhuta framework offers a jQuery-like API for DOM-processing of HTML. In AkashaCMS it is used as part of the rendering pipeline for static HTML pages, but with appropriate glue code it can be used with Express or other frameworks. The jQuery portion relies on Cheerio, which implements a jQuery subset and is much faster than the real jQuery.</p>
<p>Mahabhuta makes it easy to do these sorts of HTML DOM manipulations</p>
<ul>
<li><strong>CustomElement</strong> Define a custom tag, like <code>&lt;embed-video&gt;</code>, which is converted into a suitable block of HTML. In this case the custom element is completely replaced by the new HTML code.</li>
<li><strong>ElementTweaker</strong> Make changes to an HTML element without replacing it.</li>
<li><strong>Munger</strong> Make larger-scale changes to a page. In this case the programmer is given access to the entire page DOM, allowing any change to be implemented.</li>
</ul>
<p>Each of those subclasses a class named <strong>Mahafunc</strong>, with each serving as the base class with which the programmer implements the manipulations required to accomplish the desired goal. An array of Mahafunc&apos;s is supplied to Mahabhuta, which executes each in turn. A Mahafunc can indicate to Mahabhuta that its manipulation left the DOM &quot;dirty&quot;, meaning that the Mahafunc array must be re-executed after it is finished. This handles cases such as a CustomElement inserts another CustomElement, and ensures the new CustomElement is processed.</p>
</div>
<ebook-navigation-header id="ebook-navigation-bottom" class="panel-heading"></ebook-navigation-header>
<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'akashacms'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
</div>
<footer id="footer-row" class="container">
<div class="fb-like-box" data-href="http://www.facebook.com/Akashacms" data-width="125" data-height="250" data-show-faces="false" data-stream="false" data-header="true"></div>
</footer>
</div>
<script src="/vendor/jquery/jquery.min.js"></script><script src="/vendor/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">
var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37003917-1']);
  _gaq.push(['_setDomainName', 'akashacms.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
