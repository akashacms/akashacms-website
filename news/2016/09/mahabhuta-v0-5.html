<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width">

<title>Major upgrade to Mahabhuta, the server-side DOM processing engine in AkashaCMS</title>





 
 
 
 













<meta name="pagename" content="Major upgrade to Mahabhuta, the server-side DOM processing engine in AkashaCMS">









<meta name="date" content="Sat Aug 08 2020 22:55:48 GMT-0700 (Pacific Daylight Time)">

<meta name="DC.title" content="Major upgrade to Mahabhuta, the server-side DOM processing engine in AkashaCMS">














<!-- OpenGraph Meta Tags -->

<meta name="og:title" content="Major upgrade to Mahabhuta, the server-side DOM processing engine in AkashaCMS">

<meta name="og:url" content="https://akashacms.com/news/2016/09/mahabhuta-v0-5.html">


































<link rel="canonical" href="https://akashacms.com/news/2016/09/mahabhuta-v0-5.html">

<link rel="sitemap" type="application/xml" title="Sitemap" href="../../../sitemap.xml">


<link rel="stylesheet" type="text/css" href="../../../akasha/epub-website/style.css"><link rel="stylesheet" type="text/css" href="../../../vendor/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="../../../pulse.min.css"><link rel="stylesheet" type="text/css" href="../../../style.css"><link rel="stylesheet" type="text/css" href="../../../vendor/fontawesome-free/css/all.min.css"><link rel="stylesheet" type="text/css" href="../../../vendor/highlight.js/styles/tomorrow-night-blue.css">



<!-- Facebook app for AkashaCMS fan page -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=234745903279111";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



<!-- Twitter summary card -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@akashacms">
<meta name="twitter:creator" content="@7genblogger">

<meta name="twitter:url" content="https://akashacms.com/news/2016/09/mahabhuta-v0-5.html">


<meta name="twitter:title" content="Major upgrade to Mahabhuta, the server-side DOM processing engine in AkashaCMS">


<meta name="twitter:image" content="http://akashacms.com/logo.gif">


</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top" role="navigation">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavDropdown">
    <ul class="navbar-nav navbar-rights">
          <li class="nav-item">
              <a class="nav-link" href="../../../index.html">Home</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../akasharender/toc.html">AkashaRender</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../plugins/index.html">Plugins</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../mahabhuta/toc.html">Mahabhuta</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../epubtools/toc.html">EPUB Tools</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../howto/index.html">How To</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../index.html">News</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../about.html">About</a>
          </li>
    </ul>
  </div>
</nav>


<div class="container" role="main">
<div class="row">
<header class="col-md-12">
  <div class="row">
    <span class="col-md-8" style="text-align: center;">
      <a href="../../../index.html"><img src="../../../logo.gif" align="left"></a>
      <h1 align="center">Major upgrade to Mahabhuta, the server-side DOM processing engine in AkashaCMS</h1>
    </span>
    <span class="col-md-4">
      <form action="//www.google.com" id="cse-search-box">
        <div>
          <input type="hidden" name="cx" value="partner-pub-2401070691062219:4564101022">
          <input type="hidden" name="ie" value="UTF-8">
          <input type="text" name="q" size="30">
          <input type="submit" name="sa" value="Search">
        </div>
      </form>
      <script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en">
      // Not empty
      </script>
      <br>

    </span>
  </div>

</header>

</div>

<div class="row">
  <section id="breadcrumb" class="col-sm-12">
    <nav aria-label="breadcrumb" id="breadcrumbTrail">
    <ol class="breadcrumb">
     <li class="breadcrumb-item "> <a href="../../../index.html">AkashaCMS - the powerful static file CMS to build your dream website</a> </li> <li class="breadcrumb-item "> <a href="../../index.html">Announcements and News about AkashaCMS</a> </li> <li class="breadcrumb-item "> <a href="../index.html">AkashaCMS News and Announcements for 2016</a> </li> <li class="breadcrumb-item "> <a href="index.html">AkashaCMS News and Announcements for September 2016</a> </li> <li class="breadcrumb-item "> <a href="mahabhuta-v0-5.html">Major upgrade to Mahabhuta, the server-side DOM processing engine in AkashaCMS</a> </li>
    </ol>
</nav>

  </section>
  <section id="category-tags" class="col-sm-12">
    
    Date: September 15, 2016

  </section>
  <section id="author-byline" class="col-sm-12">
    <div class="author-byline" itemprop="author" itemscope itemtype="http://schema.org/Person">
By <span itemprop="name" class="author-name-wrapper"><a href="../../../about.html" rel="author" itemprop="url">David Herron</a></span>
</div>

  </section>
</div>

<div class="row">
  <article class="col-sm-10">
    
    <strong><p><strong>Mahabhuta can now, with its version 0.5 release, emerge from the shadows of AkashaCMS and serve a useful purpose in its own right.  DOM processing in the style of jQuery is now possible in Node.js server applications.  The update makes it more feasible to integrate Mahabhuta into applications other than AkashaCMS, including integration into Express applications.</strong></p>
</strong>
    
    <!-- no hero picture -->

    <p>A key cool feature of AkashaCMS/AkashaRender is that one can easily develop custom HTML elements that expand to HTML of your design.  This feature is actually enabled by Mahabhuta, which makes it easy to use Cheerio (the jQuery-alike library for Node.js) to do HTML DOM processing.  The system is extremely flexible, attested to by the large body of AkashaCMS plugins and the Mahabhuta functions driving those plugins.</p>
<p>Since Mahabhuta is a small library you might think it a simple thin wrapper around Cheerio, so what&apos;s the big deal?  Cheerio does the hard work of implementing parts of the jQuery API, after all.  Mahabhuta&apos;s design supports implementing any number of independent &quot;Mahafuncs&quot; and organizing them into arrays for execution.  You can easily organize groups of Mahafunc&apos;s providing related functions, then string together several of those groups in your application.</p>
<p>There are two principle types of Mahafunc&apos;s</p>
<ul>
<li><em>CustomElement</em> -- Processes a single HTML element like <code>&lt;hello-world/&gt;</code>, performs some processing (which can involve asynchronous calls to backend services), replacing it with a result like &quot;Hello, world!&quot;.</li>
<li><em>Munger</em> -- Allows arbitrary jQuery-like DOM manipulation of the page.</li>
</ul>
<p>The AkashaCMS/AkashaRender plugins contain dozens of these functions.  For example <code>akashacms-embeddables</code> provides many Mahafunc&apos;s for embedding things like 3rd party video from services like YouTube or Vimeo.  The <code>&lt;framed-youtube-player&gt;</code> calls the YouTube API to retrieve information required to nicely embed a YouTube video.  The <code>&lt;framed-embed&gt;</code> element instead uses the OEmbed protocol to serve a similar purpose.  Another example is scanning for internal links and doing some nice things like adding <code>title=</code> attributes, or if the link has no text to substitute the title of the target page.  For external links it&apos;s possible to add <code>rel=&quot;nofollow&quot;</code> to links to selected sites.</p>
<p>With version 0.5 Mahabhuta contains several new features.  The CustomElement and Munger classes for example make it easier to write Mahabhuta functions, by abstracting away some of the boilerplate.  Another class, MahafuncArray, organizes the arrays of these functions more cleverly.</p>
<p>Provided along with Mahabhuta is a group of &quot;built-in&quot; Mahafunc&apos;s.  These are the first Mahafunc&apos;s that can run independently of AkashaCMS/AkashaRender.  The most important of these is the <code>&lt;partial&gt;</code> tag which pulls in content snippets making it easier to render pages.</p>
<p>There is a small eBook in the Mahabhuta repository explaining how to use it.</p>
<p>There are two examples of using Mahabhuta including a small Express application.  By following the outline in that Express app, you can easily DOM-process the HTML in your Express app before sending it to the client.</p>
<h1>The complete rewrite of AkashaCMS ==&gt; akashaRender</h1>
<p>This year I&apos;ve undertaken to completely rewrite AkashaCMS and the result is now called AkashaRender.  I think that name will stick.</p>
<p>I had grown increasingly uneasy with the AkashaCMS internal architecture.  The advent of Node.js 4.0 and ECMAScript-2015 features like Promise&apos;s gave me a reason to learn the fine art of Promise chains.  To do so I began writing code very similar to AkashaCMS but based on the Promise object, rather than on callbacks.  Starting from scratch meant the opportunity to develop a new internal architecture based on the lessons of the AkashaCMS architecture.</p>
<p>AkashaRender relies heavily on ES-2015 Class&apos;s to organize code and functionality.  It&apos;s making the code more modular and cleaner.</p>
<p>I haven&apos;t had time to clean up the AkashaRender work to publish on the npm repository.  Instead most of the work is happening in the <code>#akasharender</code> branch of the various AkashaCMS plugins, and in the <code>akasharender</code> repository.</p>
<p>Over the next few months I&apos;ll figure out how to publish all this.  The <code>akashacms</code> packages will surely become deprecated at that time.</p>
<p>It does mean most of the documentation on this site is stale.</p>

    <div class="btn-group blog-prev-next-wrapper" role="group" aria-label="Next/Previous">
    <a class="btn btn-outline-primary blog-prev-link" href="../../2017/06/akashacms2akasharender.html" role="button">
    &#xAB;&#xAB;&#xAB;&#xAB;&#xAB;&#xAB; Massive change, AkashaCMS is gone, replaced with AkashaRender</a>
    <a class="btn btn-outline-primary blog-next-link" href="../../2015/11/selling-products.html" role="button">
    <span style="float: right">How to add a free shopping cart and sell products on an AkashaCMS website &#xBB;&#xBB;&#xBB;&#xBB;&#xBB;&#xBB;</span></a>
</div>
    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'akashacms'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the 
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=disqus.com" style="display: inline-block; padding-right: 2px;" alt="(disqus.com)">
                    <a href="https://disqus.com/?ref_noscript" rel="nofollow" target="_blank">comments powered by Disqus.</a></noscript>

                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=disqus.com" style="display: inline-block; padding-right: 2px;" alt="(disqus.com)">
                    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow" target="_blank">comments powered by <span class="logo-disqus">Disqus</span></a>
  </article>
  <section id="right" class="col-sm-2">
    
    
<p>

                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=twitter.com" style="display: inline-block; padding-right: 2px;" alt="(twitter.com)">
                    <a href="https://twitter.com/AkashaCMS" rel="me nofollow" class="twitter-follow-button" data-show-count="false" target="_blank">Follow<br>@AkashaCMS</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>

<p>
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=www.facebook.com" style="display: inline-block; padding-right: 2px;" alt="(www.facebook.com)">
                    <a href="https://www.facebook.com/Nodejs-Web-Development-116624021765933/" rel="me nofollow" target="_blank">Follow Node.js Web Development on Facebook</a></p>

    
<ul class="list-group">

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/gp/product/1785881507/ref=as_li_ss_il?ie=UTF8&amp;fpl=fresh&amp;pf_rd_m=ATVPDKIKX0DER&amp;pf_rd_s=&amp;pf_rd_r=6C1SVA4RRTWPTY7VN1Z2&amp;pf_rd_t=36701&amp;pf_rd_p=14bf09e4-93c8-43ff-8639-e7979e7d1787&amp;pf_rd_i=desktop&amp;linkCode=li2&amp;tag=davidherron-20&amp;linkId=1a83c9a47355206fbe8622bf9e90b086" target="_blank"><img border="0" src="https://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1785881507&amp;Format=_SL250_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=techsparx-20" width="175"></a>
    </li>

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/Asynchronous-Node-js-JavaScript-Promises-Generators-ebook/dp/B01N2Z4SOR/ref=as_li_ss_tl?ie=UTF8&amp;qid=1498526267&amp;sr=8-1&amp;keywords=asynchronous+javascript+promises+generators&amp;linkCode=ll1&amp;tag=techsparx-20&amp;linkId=0b8a5dc44c97bf8eb8452dac15ae724b" target="_blank"><img border="0" src="https://techsparx.com/nodejs/img/es-2015-16-17-promises-generators-and-async-await-2-1000.jpg" width="175"></a>
    </li>

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/Creating-eBooks-Markdown-Source-Tools-ebook/dp/B00WTKDH72/ref=as_li_ss_tl?_encoding=UTF8&amp;psc=1&amp;refRID=4SGHASEAZJKJBV0G60R0&amp;linkCode=ll1&amp;tag=techsparx-20&amp;linkId=941071a7b25f067767f82a7b11c06968" target="_blank"><img border="0" src="https://techsparx.com/nodejs/img/create-ebook-cover.jpg" width="175"></a>
    </li>

</ul>
  </section>
</div>

<footer class="row" style="text-align: center; height: 100px;">


<div class="fb-like-box" data-href="http://www.facebook.com/Akashacms" data-width="125" data-height="250" data-show-faces="false" data-stream="false" data-header="true"></div>

</footer>
</div>

<script src="../../../vendor/jquery/jquery.min.js"></script><script src="../../../vendor/popper.js/umd/popper.min.js"></script><script src="../../../vendor/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37003917-1']);
  _gaq.push(['_setDomainName', 'akashacms.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>



</body>
</html>
