<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width">

<title>Better HTML previewing of AkashaCMS project pages in Visual Studio Code</title>





 
 
 
 













<meta name="pagename" content="Better HTML previewing of AkashaCMS project pages in Visual Studio Code">









<meta name="date" content="Sat Aug 08 2020 22:57:31 GMT-0700 (Pacific Daylight Time)">

<meta name="DC.title" content="Better HTML previewing of AkashaCMS project pages in Visual Studio Code">














<!-- OpenGraph Meta Tags -->

<meta name="og:title" content="Better HTML previewing of AkashaCMS project pages in Visual Studio Code">

<meta name="og:url" content="https://akashacms.com/news/2020/01/akashacms-preview.html">


































<link rel="canonical" href="https://akashacms.com/news/2020/01/akashacms-preview.html">

<link rel="sitemap" type="application/xml" title="Sitemap" href="../../../sitemap.xml">


<link rel="stylesheet" type="text/css" href="../../../akasha/epub-website/style.css"><link rel="stylesheet" type="text/css" href="../../../vendor/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="../../../pulse.min.css"><link rel="stylesheet" type="text/css" href="../../../style.css"><link rel="stylesheet" type="text/css" href="../../../vendor/fontawesome-free/css/all.min.css"><link rel="stylesheet" type="text/css" href="../../../vendor/highlight.js/styles/tomorrow-night-blue.css">



<!-- Facebook app for AkashaCMS fan page -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=234745903279111";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



<!-- Twitter summary card -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@akashacms">
<meta name="twitter:creator" content="@7genblogger">

<meta name="twitter:url" content="https://akashacms.com/news/2020/01/akashacms-preview.html">


<meta name="twitter:title" content="Better HTML previewing of AkashaCMS project pages in Visual Studio Code">


<meta name="twitter:image" content="http://akashacms.com/logo.gif">


</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top" role="navigation">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavDropdown">
    <ul class="navbar-nav navbar-rights">
          <li class="nav-item">
              <a class="nav-link" href="../../../index.html">Home</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../akasharender/toc.html">AkashaRender</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../plugins/index.html">Plugins</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../mahabhuta/toc.html">Mahabhuta</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../epubtools/toc.html">EPUB Tools</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../howto/index.html">How To</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../index.html">News</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../about.html">About</a>
          </li>
    </ul>
  </div>
</nav>


<div class="container" role="main">
<div class="row">
<header class="col-md-12">
  <div class="row">
    <span class="col-md-8" style="text-align: center;">
      <a href="../../../index.html"><img src="../../../logo.gif" align="left"></a>
      <h1 align="center">Better HTML previewing of AkashaCMS project pages in Visual Studio Code</h1>
    </span>
    <span class="col-md-4">
      <form action="//www.google.com" id="cse-search-box">
        <div>
          <input type="hidden" name="cx" value="partner-pub-2401070691062219:4564101022">
          <input type="hidden" name="ie" value="UTF-8">
          <input type="text" name="q" size="30">
          <input type="submit" name="sa" value="Search">
        </div>
      </form>
      <script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en">
      // Not empty
      </script>
      <br>

    </span>
  </div>

</header>

</div>

<div class="row">
  <section id="breadcrumb" class="col-sm-12">
    <nav aria-label="breadcrumb" id="breadcrumbTrail">
    <ol class="breadcrumb">
     <li class="breadcrumb-item "> <a href="../../../index.html">AkashaCMS - the powerful static file CMS to build your dream website</a> </li> <li class="breadcrumb-item "> <a href="../../index.html">Announcements and News about AkashaCMS</a> </li> <li class="breadcrumb-item "> <a href="../index.html">AkashaCMS News for 2020</a> </li> <li class="breadcrumb-item "> <a href="index.html">News for January 2020</a> </li> <li class="breadcrumb-item "> <a href="akashacms-preview.html">Better HTML previewing of AkashaCMS project pages in Visual Studio Code</a> </li>
    </ol>
</nav>

  </section>
  <section id="category-tags" class="col-sm-12">
    
    Date: January 27, 2020

  </section>
  <section id="author-byline" class="col-sm-12">
    <div class="author-byline" itemprop="author" itemscope itemtype="http://schema.org/Person">
By <span itemprop="name" class="author-name-wrapper"><a href="../../../about.html" rel="author" itemprop="url">David Herron</a></span>
</div>

  </section>
</div>

<div class="row">
  <article class="col-sm-10">
    
    <strong><p><strong>WYSIWYG is a useful document editing model, but in an AkashaCMS project there hasn&apos;t been a way to do that.  The tools for AkashaCMS let us edit Markdown files in a programmers editor, like Visual Studio Code, but then we&apos;re left to our imagination as to how the page will look.  It&apos;s easy to set up a preview mode in an AkashaCMS project using a simple command-line HTML server and an external web browser.  But it&apos;s not well integrated with the editing experience, and in practice I never did it.  There is a Visual Studio Code extension that makes this better offering a good preview experience right inside VSCode. 
</strong></p>
</strong>
    
    <!-- no hero picture -->

    <p>So far what I have done for a live preview is to use the Markdown Previewer for Visual Studio Code.  The Markdown previewer does a decent job of showing what the Markdown codes will produce, and it&apos;s helpful knowing that I&apos;m not screwing up the Markdown.</p>
<p>As good as the Markdown previewer is, it does not show me how AkashaCMS renders the page.  If I&apos;ve used one of the many AkashaCMS tags, the Markdown previewer doesn&apos;t know what to do with them, and they don&apos;t render.  And of course AkashaCMS applies all kinds of page layout and theming and other things to make a full HTML page ready for deployment to a web server.  The Markdown previewer doesn&apos;t support any of that.</p>
<p>For example we can make a link to any page on the site, like <a href="../../../index.html" title="AkashaCMS - the powerful static file CMS to build your dream website">AkashaCMS - the powerful static file CMS to build your dream website</a>, and the Markdown previewer doesn&apos;t render the link as anything.  You then have to imagine that the link did render, and what it would show.</p>
<p>As an example let us take a screen shot of how the Markdown previewer looks while editing this very blog post.</p>
<figure>
        
        <img src="img/html-previewer.jpg">
        
        
</figure>

<p>It&apos;s not bad but it&apos;s not very useful, either.</p>
<p>In the Visual Studio Code marketplace I found 
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=marketplace.visualstudio.com" style="display: inline-block; padding-right: 2px;" alt="(marketplace.visualstudio.com)">
                    <a href="https://marketplace.visualstudio.com/items?itemName=auchenberg.vscode-browser-preview" rel="nofollow" target="_blank">Browser Preview</a> and have determined it is a better previewer for the purpose of AkashaCMS project content.  What it does is set up a &quot;headless Chrome&quot; instance in a Visual Studio Code pane.  With that we get a high quality preview as it would be viewed in a real web browser.</p>
<p>Namely:</p>
<figure>
        
        <img src="./img/browser-preview.jpg">
        
        
</figure>

<p>What we have here is -</p>
<ul>
<li>Browser Preview in a VSCode pane</li>
<li>A terminal window at the bottom</li>
<li>AkashaCMS/Markdown source for this blog post in another pane.</li>
</ul>
<p>The Browser Preview pane is close to a full web browser, in a VSCode pane.  It has a location bar to enter URL&apos;s, forward and back buttons, and most importantly a reload button.</p>
<p>There are two active terminals:</p>
<ul>
<li>he invisible terminal is running a simple web-server that is pointed at the rendered website directory.
<ul>
<li>To prepare, I ran <code>npm run build</code> to render this website, giving me initial rendered HTML for this page.</li>
</ul>
</li>
<li>In the visible terminal, I then run this command to re-render this page:</li>
</ul>
<pre><code class="hljs">$ akasharender render-document config.js news/<span class="hljs-number">2020</span>/<span class="hljs-number">01</span>/akashacms-preview.html.md 
.html.md documents/news/<span class="hljs-number">2020</span>/<span class="hljs-number">01</span>/akashacms-preview.html.md ==&gt; <span class="hljs-keyword">out</span>/news/<span class="hljs-number">2020</span>/<span class="hljs-number">01</span>/akashacms-preview.html (<span class="hljs-number">2.48</span> seconds)
documents news/<span class="hljs-number">2020</span>/<span class="hljs-number">01</span>/akashacms-preview.html.md <span class="hljs-keyword">out</span>/ FRONTMATTER <span class="hljs-number">0.032</span> seconds
documents news/<span class="hljs-number">2020</span>/<span class="hljs-number">01</span>/akashacms-preview.html.md <span class="hljs-keyword">out</span>/ FIRST RENDER <span class="hljs-number">0.074</span> seconds
documents news/<span class="hljs-number">2020</span>/<span class="hljs-number">01</span>/akashacms-preview.html.md <span class="hljs-keyword">out</span>/ FIRST MAHABHUTA <span class="hljs-number">0.183</span> seconds
documents news/<span class="hljs-number">2020</span>/<span class="hljs-number">01</span>/akashacms-preview.html.md <span class="hljs-keyword">out</span>/ SECOND RENDER <span class="hljs-number">2.437</span> seconds
documents news/<span class="hljs-number">2020</span>/<span class="hljs-number">01</span>/akashacms-preview.html.md <span class="hljs-keyword">out</span>/ RENDERED <span class="hljs-number">2.482</span> seconds
</code></pre>
<p>Once the page is rendered I simply hit reload in the Browser Preview.  But, let&apos;s talk about the the implementation in more depth.</p>
<p>This site is configured with a <code>preview</code> script that uses a simple Web Server that an be run from the command line.  To use it, I run this command:</p>
<pre><code class="hljs">$ npm <span class="hljs-keyword">run</span> preview

&gt; akashacms-website@0.7.0 preview /Volumes/Extra/akasharender/akashacms-website
&gt; <span class="hljs-keyword">cd</span> <span class="hljs-keyword">out</span> &amp;&amp; ws --<span class="hljs-keyword">log</span>.<span class="hljs-keyword">format</span> dev

Listening <span class="hljs-keyword">on</span> http:<span class="hljs-comment">//MacBook-Pro-4:8000, http://127.0.0.1:8000, http://192.168.1.89:8000</span>
</code></pre>
<p>This gives a few URL&apos;s to visit.  We don&apos;t strictly speaking need a web browser component to be embedded in a VSCode pane.  We could use an external browser.  Also, there is the all-important mobile browser previewing which can be done on a real mobile device.  But, I&apos;m finding Browser Preview&apos;s web browser in a VSCode pane to be very nice, and it even has a built-in mobile preview mode.</p>
<p>In any case, with BrowserPreview I simply paste the <code>http://127.0.0.1:8000</code> into its location bar.  That&apos;s visible in the screen shot above.  This URL is obviously the base URL of the website, but we can easily navigate to any page by clicking on links.</p>
<p>This is significantly different from the other HTML previewers in the VSCode marketplace.  Those simply show the rendered HTML in a VCScode pane.  That&apos;s nice, but how is it supposed to find the CSS files?  For an image SRC or link HREF that uses an absolute local URL, how does the previewer know where to look in the file system to find the file?  Does it run the embedded JavaScript to ensure correct rendering?</p>
<p>Those issues explain why a web server is required, and why a complete web browser component is required. The web server knows how to interpret a request for a file from an absolute local URL, and the web browser component executes embedded JavaScript.</p>
<p>With the preview server running in one terminal, and the second terminal available to re-render the page at any time, the editing process is:</p>
<ol>
<li>Edit content</li>
<li>Save content to disk</li>
<li>Re-render</li>
<li>In Browser Preview, hit reload</li>
</ol>
<p>And you end up with something like this:</p>
<figure>
        
        <img src="./img/preview-after-editing.jpg">
        
        
</figure>

<p>This is very cool.  It&apos;s what I&apos;ve wanted to have for years of using AkashaCMS, but simply hadn&apos;t bothered.  However there are a couple things that remain to be done to make this excellent:</p>
<ol>
<li>You&apos;ll notice I&apos;m manually copying image files into the rendered output directory.  That should be automated.</li>
<li>There should be a live renderer for AkashaCMS project content.</li>
<li>In other words, the process should just be SAVE then the live renderer (that doesn&apos;t exist yet) takes care of re-rendering automatically, and likewise the background web-server supports live reload.</li>
<li>The performance of <code>akasharender render-document</code> should be improved.  It&apos;s taking 7 seconds on my laptop to re-render this simple page.</li>
</ol>
<p>What I want is what&apos;s said in that third point, namely:</p>
<ol>
<li>Edit content - then SAVE</li>
<li>Automatic processes occur in which
<ol>
<li>The page of the AkashaCMS project is re-rendered</li>
<li>Live preview in a VSCode pane automatically refreshes</li>
</ol>
</li>
</ol>
<p>In my copious free time, that will be my next task for AkashaCMS.</p>

    <div class="btn-group blog-prev-next-wrapper" role="group" aria-label="Next/Previous">
    <a class="btn btn-outline-primary blog-prev-link" href="../04/code-embed.html" role="button">
    &#xAB;&#xAB;&#xAB;&#xAB;&#xAB;&#xAB; Embed code snippets in AkashaCMS rendered HTML documents</a>
    <a class="btn btn-outline-primary blog-next-link" href="../../2019/10/testing-infrastructure.html" role="button">
    <span style="float: right">Implementing tests for AkashaRender and the plugins, and an automated testing infrastructure &#xBB;&#xBB;&#xBB;&#xBB;&#xBB;&#xBB;</span></a>
</div>
    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'akashacms'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the 
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=disqus.com" style="display: inline-block; padding-right: 2px;" alt="(disqus.com)">
                    <a href="https://disqus.com/?ref_noscript" rel="nofollow" target="_blank">comments powered by Disqus.</a></noscript>

                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=disqus.com" style="display: inline-block; padding-right: 2px;" alt="(disqus.com)">
                    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow" target="_blank">comments powered by <span class="logo-disqus">Disqus</span></a>
  </article>
  <section id="right" class="col-sm-2">
    
    
<p>

                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=twitter.com" style="display: inline-block; padding-right: 2px;" alt="(twitter.com)">
                    <a href="https://twitter.com/AkashaCMS" rel="me nofollow" class="twitter-follow-button" data-show-count="false" target="_blank">Follow<br>@AkashaCMS</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>

<p>
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=www.facebook.com" style="display: inline-block; padding-right: 2px;" alt="(www.facebook.com)">
                    <a href="https://www.facebook.com/Nodejs-Web-Development-116624021765933/" rel="me nofollow" target="_blank">Follow Node.js Web Development on Facebook</a></p>

    
<ul class="list-group">

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/gp/product/1785881507/ref=as_li_ss_il?ie=UTF8&amp;fpl=fresh&amp;pf_rd_m=ATVPDKIKX0DER&amp;pf_rd_s=&amp;pf_rd_r=6C1SVA4RRTWPTY7VN1Z2&amp;pf_rd_t=36701&amp;pf_rd_p=14bf09e4-93c8-43ff-8639-e7979e7d1787&amp;pf_rd_i=desktop&amp;linkCode=li2&amp;tag=davidherron-20&amp;linkId=1a83c9a47355206fbe8622bf9e90b086" target="_blank"><img border="0" src="https://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1785881507&amp;Format=_SL250_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=techsparx-20" width="175"></a>
    </li>

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/Asynchronous-Node-js-JavaScript-Promises-Generators-ebook/dp/B01N2Z4SOR/ref=as_li_ss_tl?ie=UTF8&amp;qid=1498526267&amp;sr=8-1&amp;keywords=asynchronous+javascript+promises+generators&amp;linkCode=ll1&amp;tag=techsparx-20&amp;linkId=0b8a5dc44c97bf8eb8452dac15ae724b" target="_blank"><img border="0" src="https://techsparx.com/nodejs/img/es-2015-16-17-promises-generators-and-async-await-2-1000.jpg" width="175"></a>
    </li>

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/Creating-eBooks-Markdown-Source-Tools-ebook/dp/B00WTKDH72/ref=as_li_ss_tl?_encoding=UTF8&amp;psc=1&amp;refRID=4SGHASEAZJKJBV0G60R0&amp;linkCode=ll1&amp;tag=techsparx-20&amp;linkId=941071a7b25f067767f82a7b11c06968" target="_blank"><img border="0" src="https://techsparx.com/nodejs/img/create-ebook-cover.jpg" width="175"></a>
    </li>

</ul>
  </section>
</div>

<footer class="row" style="text-align: center; height: 100px;">


<div class="fb-like-box" data-href="http://www.facebook.com/Akashacms" data-width="125" data-height="250" data-show-faces="false" data-stream="false" data-header="true"></div>

</footer>
</div>

<script src="../../../vendor/jquery/jquery.min.js"></script><script src="../../../vendor/popper.js/umd/popper.min.js"></script><script src="../../../vendor/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37003917-1']);
  _gaq.push(['_setDomainName', 'akashacms.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>



</body>
</html>
