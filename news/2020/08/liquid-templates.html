<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width">

<title>Added support for Liquid templates to AkashaCMS, no performance improvements</title>





 
 
 
 













<meta name="pagename" content="Added support for Liquid templates to AkashaCMS, no performance improvements">









<meta name="date" content="Thu Aug 06 2020 23:53:36 GMT-0700 (Pacific Daylight Time)">

<meta name="DC.title" content="Added support for Liquid templates to AkashaCMS, no performance improvements">














<!-- OpenGraph Meta Tags -->

<meta name="og:title" content="Added support for Liquid templates to AkashaCMS, no performance improvements">

<meta name="og:url" content="https://akashacms.com/news/2020/08/liquid-templates.html">


































<link rel="canonical" href="https://akashacms.com/news/2020/08/liquid-templates.html">

<link rel="sitemap" type="application/xml" title="Sitemap" href="../../../sitemap.xml">


<link rel="stylesheet" type="text/css" href="../../../akasha/epub-website/style.css"><link rel="stylesheet" type="text/css" href="../../../vendor/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="../../../pulse.min.css"><link rel="stylesheet" type="text/css" href="../../../style.css"><link rel="stylesheet" type="text/css" href="../../../vendor/fontawesome-free/css/all.min.css"><link rel="stylesheet" type="text/css" href="../../../vendor/highlight.js/styles/tomorrow-night-blue.css">



<!-- Facebook app for AkashaCMS fan page -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=234745903279111";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



<!-- Twitter summary card -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@akashacms">
<meta name="twitter:creator" content="@7genblogger">

<meta name="twitter:url" content="https://akashacms.com/news/2020/08/liquid-templates.html">


<meta name="twitter:title" content="Added support for Liquid templates to AkashaCMS, no performance improvements">


<meta name="twitter:image" content="http://akashacms.com/logo.gif">


</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top" role="navigation">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavDropdown">
    <ul class="navbar-nav navbar-rights">
          <li class="nav-item">
              <a class="nav-link" href="../../../index.html">Home</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../akasharender/toc.html">AkashaRender</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../plugins/index.html">Plugins</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../mahabhuta/toc.html">Mahabhuta</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../epubtools/toc.html">EPUB Tools</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../howto/index.html">How To</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../index.html">News</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../../about.html">About</a>
          </li>
    </ul>
  </div>
</nav>


<div class="container" role="main">
<div class="row">
<header class="col-md-12">
  <div class="row">
    <span class="col-md-8" style="text-align: center;">
      <a href="../../../index.html"><img src="../../../logo.gif" align="left"></a>
      <h1 align="center">Added support for Liquid templates to AkashaCMS, no performance improvements</h1>
    </span>
    <span class="col-md-4">
      <form action="//www.google.com" id="cse-search-box">
        <div>
          <input type="hidden" name="cx" value="partner-pub-2401070691062219:4564101022">
          <input type="hidden" name="ie" value="UTF-8">
          <input type="text" name="q" size="30">
          <input type="submit" name="sa" value="Search">
        </div>
      </form>
      <script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en">
      // Not empty
      </script>
      <br>

    </span>
  </div>

</header>

</div>

<div class="row">
  <section id="breadcrumb" class="col-sm-12">
    <nav aria-label="breadcrumb" id="breadcrumbTrail">
    <ol class="breadcrumb">
     <li class="breadcrumb-item "> <a href="../../../index.html">AkashaCMS - the powerful static file CMS to build your dream website</a> </li> <li class="breadcrumb-item "> <a href="../../index.html">Announcements and News about AkashaCMS</a> </li> <li class="breadcrumb-item "> <a href="../index.html">AkashaCMS News for 2020</a> </li> <li class="breadcrumb-item "> <a href="index.html">News for August 2020</a> </li> <li class="breadcrumb-item "> <a href="liquid-templates.html">Added support for Liquid templates to AkashaCMS, no performance improvements</a> </li>
    </ol>
</nav>

  </section>
  <section id="category-tags" class="col-sm-12">
    
    Date: August 6, 2020

  </section>
  <section id="author-byline" class="col-sm-12">
    <div class="author-byline" itemprop="author" itemscope itemtype="http://schema.org/Person">
By <span itemprop="name" class="author-name-wrapper"><a href="../../../about.html" rel="author" itemprop="url">David Herron</a></span>
</div>

  </section>
</div>

<div class="row">
  <article class="col-sm-10">
    
    <strong><p><strong>AkashaCMS was designed to support multiple layout rendering engines, but I never went beyond implementing EJS templates.  The EJS template engine is competent, but there are many other engines with huge capabilities that could potentially be useful in AkashaCMS.  I have two thoughts in mind, to bring in more powerful template engines, but to also find which template engine has the best performance.  In other words, it&apos;s possible to improve AkashaCMS performance by adopting a different template engine.
</strong></p>
</strong>
    
    <!-- no hero picture -->

    <p>Let&apos;s first talk about how to use Liquid templates, and then we&apos;ll talk about the performance measurements.</p>
<h1>Using Liquid templates in AkashaCMS</h1>
<p>Liquid Templates appears to have been developed by Shopify and is documented here:  
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=shopify.github.io" style="display: inline-block; padding-right: 2px;" alt="(shopify.github.io)">
                    <a href="https://shopify.github.io/liquid/" rel="nofollow" target="_blank">https://shopify.github.io/liquid/</a></p>
<p>The implementation used in Node.js is a port of the Ruby engine created by Shopify to JavaScript.  FWIW the module is documented here: 
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=www.npmjs.com" style="display: inline-block; padding-right: 2px;" alt="(www.npmjs.com)">
                    <a href="https://www.npmjs.com/package/liquid" rel="nofollow" target="_blank">https://www.npmjs.com/package/liquid</a></p>
<p>In an AkashaCMS documents directory files are named as always:  <code>example.html.md</code> for a Markdown document, for example.</p>
<p>Where the choice of template comes in is the <code>layout</code> tag.  For example:</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">layout:</span> <span class="hljs-string">blog.html.liquid</span>
</code></pre>
<p>Until now your choice would have been to put <code>blog.html.ejs</code> here for EJS templates.  But now you can use <code>blog.html.liquid</code>, which then requires implementing the matching template.</p>
<p>Once you&apos;ve done that your template can use all the capabilities of Liquid templates.  In the templates I&apos;ve created for my websites, the capabilities I&apos;ve needed were to present values in a template, and to test the existence of a variable to control whether or not to include certain markup.</p>
<p>In most template languages there are two ways to access a value -- one way is to present the value encoded in HTML, and the other being to present the raw value.  The encoded version is safer because HTML in the string is encode, rather than presented as the HTML, which means if there any nefarious code is neutered.  The unencoded version is required in many cases because we&apos;ll have rendered some HTML and need to include it in the rendered file.</p>
<p>For example:</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{{ title | escape }}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
</code></pre>
<p>In Liquid all value references are within double curly-braces, <code>{{ value }}</code>.  Liquid has an extensive list of filter functions available, and it&apos;s easy to add your own filters.  The filter used here, <code>escape</code>, handles encoding the string as safe HTML.</p>
<pre><code class="hljs language-html">{{ content }}
</code></pre>
<p>In AkashaCMS, the <code>content</code> variable has the HTML from the rendered document.  That is, it is the output of rendering Markdown or AsciiDoc to HTML.  That HTML needs to be presented as-is rather than encoded.</p>
<pre><code class="hljs language-html">{% if teaser %}
<span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">ak-teaser</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ak-teaser</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
{% endif %}
</code></pre>
<p>The last thing we&apos;d wish to do is to optionally present some markup.  In this case if a teaser has been set, then we&apos;ll embed the teaser in the rendered document.  But if no teaser is set, then we want nothing to be rendered.</p>
<p>There is plenty more to explore as capabilities of the Liquid template engine.  And there are plenty more options to express in the AkashaCMS API.</p>
<p>For example, the Liquid template implementation lets you add more tags and other customizations.  That needs to be surfaced as a method on the Plugin object, so that AkashaCMS configuration files can customize the Liquid engine.</p>
<p>Another thing remaining to do is support Liquid templates for Partials.</p>
<p>The last thing to do is to explore other template engines.  As said earlier, one purpose was to improve performance, and it appears Liquid did not do anything for performance.</p>
<h1>Performance of Liquid templates in AkashaCMS</h1>
<p>I&apos;ve created a workspace, <code>akashacms-perftest</code>, that is an AkashaCMS site that will render a thousand pages.  The idea is to have a significantly large workload to measure how long it will take to render a site with different software options.</p>
<p>The workspace is at:  
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=github.com" style="display: inline-block; padding-right: 2px;" alt="(github.com)">
                    <a href="https://github.com/akashacms/akashacms-perftest" rel="nofollow" target="_blank">https://github.com/akashacms/akashacms-perftest</a></p>
<p>The timings were created by running the command:</p>
<pre><code class="hljs">$ <span class="hljs-built_in">time</span> akasharender render _config-<span class="hljs-built_in">file</span>.js_
</code></pre>
<p>In the <code>akashacms-perftest</code> workspace I have a documents directory containing documents using an EJS template.  For this test I duplicated that directory, then changed the layout tag in each document to use the Liquid version of that template.  Hence, it is the exact set of documents, but renderable using either an EJS or Liquid template.</p>
<pre><code class="hljs">AkashaRender EJS

real    1m20.037s <span class="hljs-built_in"> user </span>   0m45.280s   sys     0m5.292s
real    1m12.638s <span class="hljs-built_in"> user </span>   0m44.590s   sys     0m5.347s
real    1m25.463s <span class="hljs-built_in"> user </span>   0m44.043s   sys     0m5.130s
real    1m25.197s <span class="hljs-built_in"> user </span>   0m44.225s   sys     0m5.067s
real    1m25.638s <span class="hljs-built_in"> user </span>   0m46.423s   sys     0m5.450s
real    1m23.295s <span class="hljs-built_in"> user </span>   0m43.698s   sys     0m5.081s
</code></pre>
<p>This is the times for rendering the site that uses EJS templates.</p>
<pre><code class="hljs">AkashaRender Liquid

real    1m20.700s <span class="hljs-built_in"> user </span>   0m45.255s  sys     0m5.118s
real    1m18.224s <span class="hljs-built_in"> user </span>   0m46.492s  sys     0m5.132s
real    1m24.469s <span class="hljs-built_in"> user </span>   0m46.481s  sys     0m5.155s
real    1m24.154s <span class="hljs-built_in"> user </span>   0m45.897s  sys     0m5.165s
real    1m26.474s <span class="hljs-built_in"> user </span>   0m45.294s  sys     0m5.216s
real    1m25.310s <span class="hljs-built_in"> user </span>   0m45.761s  sys     0m5.114s
</code></pre>
<p>And this is the times for rendering the site that uses Liquid templates.</p>
<p>As you can see, the numbers are roughly the same.  In other words, this did not produce the desired performance improvement.  So... back to the drawing board, it seems.</p>

    <div class="btn-group blog-prev-next-wrapper" role="group" aria-label="Next/Previous">
    <a class="btn btn-outline-primary blog-prev-link" href="jamstack-websites.html" role="button">
    &#xAB;&#xAB;&#xAB;&#xAB;&#xAB;&#xAB; What is JAMStack and how does it differ from static website generators?</a>
    <a class="btn btn-outline-primary blog-next-link" href="../04/code-embed.html" role="button">
    <span style="float: right">Embed code snippets in AkashaCMS rendered HTML documents &#xBB;&#xBB;&#xBB;&#xBB;&#xBB;&#xBB;</span></a>
</div>
    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'akashacms'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the 
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=disqus.com" style="display: inline-block; padding-right: 2px;" alt="(disqus.com)">
                    <a href="https://disqus.com/?ref_noscript" rel="nofollow" target="_blank">comments powered by Disqus.</a></noscript>

                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=disqus.com" style="display: inline-block; padding-right: 2px;" alt="(disqus.com)">
                    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow" target="_blank">comments powered by <span class="logo-disqus">Disqus</span></a>
  </article>
  <section id="right" class="col-sm-2">
    
    
<p>

                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=twitter.com" style="display: inline-block; padding-right: 2px;" alt="(twitter.com)">
                    <a href="https://twitter.com/AkashaCMS" rel="me nofollow" class="twitter-follow-button" data-show-count="false" target="_blank">Follow<br>@AkashaCMS</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>

<p>
                    <img class="akashacms-external-links-favicon opengraph-no-promote" src="https://www.google.com/s2/favicons?domain=www.facebook.com" style="display: inline-block; padding-right: 2px;" alt="(www.facebook.com)">
                    <a href="https://www.facebook.com/Nodejs-Web-Development-116624021765933/" rel="me nofollow" target="_blank">Follow Node.js Web Development on Facebook</a></p>

    
<ul class="list-group">

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/gp/product/1785881507/ref=as_li_ss_il?ie=UTF8&amp;fpl=fresh&amp;pf_rd_m=ATVPDKIKX0DER&amp;pf_rd_s=&amp;pf_rd_r=6C1SVA4RRTWPTY7VN1Z2&amp;pf_rd_t=36701&amp;pf_rd_p=14bf09e4-93c8-43ff-8639-e7979e7d1787&amp;pf_rd_i=desktop&amp;linkCode=li2&amp;tag=davidherron-20&amp;linkId=1a83c9a47355206fbe8622bf9e90b086" target="_blank"><img border="0" src="https://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1785881507&amp;Format=_SL250_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=techsparx-20" width="175"></a>
    </li>

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/Asynchronous-Node-js-JavaScript-Promises-Generators-ebook/dp/B01N2Z4SOR/ref=as_li_ss_tl?ie=UTF8&amp;qid=1498526267&amp;sr=8-1&amp;keywords=asynchronous+javascript+promises+generators&amp;linkCode=ll1&amp;tag=techsparx-20&amp;linkId=0b8a5dc44c97bf8eb8452dac15ae724b" target="_blank"><img border="0" src="https://techsparx.com/nodejs/img/es-2015-16-17-promises-generators-and-async-await-2-1000.jpg" width="175"></a>
    </li>

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/Creating-eBooks-Markdown-Source-Tools-ebook/dp/B00WTKDH72/ref=as_li_ss_tl?_encoding=UTF8&amp;psc=1&amp;refRID=4SGHASEAZJKJBV0G60R0&amp;linkCode=ll1&amp;tag=techsparx-20&amp;linkId=941071a7b25f067767f82a7b11c06968" target="_blank"><img border="0" src="https://techsparx.com/nodejs/img/create-ebook-cover.jpg" width="175"></a>
    </li>

</ul>
  </section>
</div>

<footer class="row" style="text-align: center; height: 100px;">
<!-- partial file-name="ebook-footer.html"/ -->

<div class="fb-like-box" data-href="http://www.facebook.com/Akashacms" data-width="125" data-height="250" data-show-faces="false" data-stream="false" data-header="true"></div>

</footer>
</div>

<script src="../../../vendor/jquery/jquery.min.js"></script><script src="../../../vendor/popper.js/umd/popper.min.js"></script><script src="../../../vendor/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37003917-1']);
  _gaq.push(['_setDomainName', 'akashacms.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- partial file-name="piwik_analytics.html"></partial -->


</body>
</html>
