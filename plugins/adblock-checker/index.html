<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width">


    <title>AskashaCMS Adblock Checker documentation</title>





 
 
 
 













<meta name="pagename" content="AskashaCMS Adblock Checker documentation">









<meta name="date" content="Sat Oct 26 1985 01:15:00 GMT-0700 (Pacific Daylight Time)">

<meta name="DC.title" content="AskashaCMS Adblock Checker documentation">














<!-- OpenGraph Meta Tags -->

<meta name="og:title" content="AskashaCMS Adblock Checker documentation">

<meta name="og:url" content="https://akashacms.com/plugins/adblock-checker/index.html">


































<link rel="canonical" href="https://akashacms.com/plugins/adblock-checker/index.html">

<link rel="sitemap" type="application/xml" title="Sitemap" href="../../sitemap.xml">


<link rel="stylesheet" type="text/css" href="../../akasha/epub-website/style.css"><link rel="stylesheet" type="text/css" href="../../vendor/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="../../pulse.min.css"><link rel="stylesheet" type="text/css" href="../../style.css"><link rel="stylesheet" type="text/css" href="../../vendor/fontawesome-free/css/all.min.css"><link rel="stylesheet" type="text/css" href="../../vendor/highlight.js/styles/tomorrow-night-blue.css">



<!-- Facebook app for AkashaCMS fan page -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=234745903279111";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



<!-- Twitter summary card -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@akashacms">
<meta name="twitter:creator" content="@7genblogger">

<meta name="twitter:url" content="https://akashacms.com/plugins/adblock-checker/index.html">


<meta name="twitter:title" content="AskashaCMS Adblock Checker documentation">


<meta name="twitter:image" content="http://akashacms.com/logo.gif">


</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top" role="navigation">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavDropdown">
    <ul class="navbar-nav navbar-rights">
          <li class="nav-item">
              <a class="nav-link" href="../../index.html">Home</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../akasharender/toc.html">AkashaRender</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../index.html">Plugins</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../mahabhuta/toc.html">Mahabhuta</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../epubtools/toc.html">EPUB Tools</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../howto/index.html">How To</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../news/index.html">News</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="../../about.html">About</a>
          </li>
    </ul>
  </div>
</nav>


<div class="container" role="main">
<div class="row">
<header class="col-md-12">
  <div class="row">
    <span class="col-md-8" style="text-align: center;">
      <a href="../../index.html"><img src="../../logo.gif" align="left"></a>
      <h1 align="center">AskashaCMS Adblock Checker documentation</h1>
    </span>
    <span class="col-md-4">
      <form action="//www.google.com" id="cse-search-box">
        <div>
          <input type="hidden" name="cx" value="partner-pub-2401070691062219:4564101022">
          <input type="hidden" name="ie" value="UTF-8">
          <input type="text" name="q" size="30">
          <input type="submit" name="sa" value="Search">
        </div>
      </form>
      <script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en">
      // Not empty
      </script>
      <br>

    </span>
  </div>

</header>

</div>

<div class="row">

<div class="row">
  <section id="breadcrumb" class="col-sm-12">
    <nav aria-label="breadcrumb" id="breadcrumbTrail">
    <ol class="breadcrumb">
     <li class="breadcrumb-item "> <a href="../../index.html">AkashaCMS - the powerful static file CMS to build your dream website</a> </li> <li class="breadcrumb-item "> <a href="../index.html">AkashaCMS plugin directory</a> </li> <li class="breadcrumb-item "> <a href="index.html">AskashaCMS Adblock Checker documentation</a> </li>
    </ol>
</nav>

  </section>
</div>

<div class="row">
  <article class="col-sm-10">
    
    <p>Understandably many people run an Advertising Blocking extension in their web browser.  Advertising techniques frequently cause excess page load times and bad performance.  Those of us who publish websites often monetize by running advertising, and therefore we earn our living by showing advertising to our customers.  Ad blockers interfere with that business model, and we require a method to communicate with the customers who block our advertising efforts.</p>
<p>Of course it&apos;s useful if our advertising efforts do not cause an excessively bad experience for our customers.  That our customers resort to running an ad blocker is a symptom of over-the-top advertising techniques.  It is your choice whether to follow that recommendation, or not.</p>
<p>The point of the <code>akashacms-adblock-checker</code> plugin is two-fold:</p>
<ul>
<li>Detect whether an advertisement has been blocked</li>
<li>Display a message to the reader</li>
</ul>
<h1>Installation</h1>
<p>With an AkashaCMS website setup, add the following to <code>package.json</code></p>
<pre><code class="hljs">  <span class="hljs-string">&quot;dependencies&quot;</span>: {
    <span class="hljs-string">...</span>
    <span class="hljs-string">&quot;akashacms-adblock-checker&quot;</span>: <span class="hljs-string">&quot;akashacms/akashacms-adblock-checker&quot;</span>
    <span class="hljs-string">...</span>
  }
</code></pre>
<p>I haven&apos;t decided to publish this plugin to <code>npm</code> yet.  Instead, at the moment, one should access it as shown here from the Github repository.</p>
<p>Once added to <code>package.json</code> run: <code>npm install</code></p>
<h2>Page layout code</h2>
<p>To enable the Adblock-Checker on a given page layout, add the following custom tag:</p>
<pre><code class="hljs"><span class="hljs-section">&lt;adblock-checker&gt;</span><span class="hljs-section">&lt;/adblock-checker&gt;</span>
</code></pre>
<p>This custom tag invokes the partial named below, passing in the data given in the Configuration.</p>
<h1>Configuration</h1>
<p>In <code>config.js</code> for the website:</p>
<pre><code class="hljs">config.use(require(<span class="hljs-string">&apos;akashacms-adblock-checker&apos;</span>), {
        selector: <span class="hljs-string">&apos;\&quot;.advert\&quot;&apos;</span>,
        codeOnBlocked: `
        HTML of message <span class="hljs-keyword">to</span> display <span class="hljs-keyword">to</span><span class="hljs-built_in"> user
</span>        `
});
</code></pre>
<p>The string passed in <code>selector</code> is a jQuery selector to match a wrapper <code>div</code> you add to your advertising blocks.  See the next section for a discussion.</p>
<p>The string passed in <code>codeOnBlocked</code> is HTML that is to be displayed to the user.  By using a back-quote string (what ES-2015 calls a Template String) the string can include newlines for readability.  Those newlines will be removed before passing to the partial, however.</p>
<h1>Ad-Block Detection methodology</h1>
<p>Having looked at the configuration, let&apos;s discuss the detection methodology.  I&apos;ve verified this technique works with the adblocker I sometimes run in Chrome.</p>
<p>An adblocker works by looking for HTML sections it doesn&apos;t like, that it thinks constitutes an advertisement.  For example it might look for JavaScript or an <code>iframe</code> loading from specific URL&apos;s, or simply an HTML snippet that it recognizes as an advertisement.  It then removes that HTML from the DOM.</p>
<p>Therefore, if one wraps the advertisement with a <code>div</code>, that <code>div</code> will be empty.  Ergo, if one were to run some JavaScript to check the height of the wrapper <code>div</code>, a height of 0 pixels should be a clue of a blocked advertisement.</p>
<p>Consider:</p>
<pre><code class="hljs"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;advert&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ins</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;adsbygoogle&quot;</span>
     <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display:block&quot;</span>
     <span class="hljs-attr">data-ad-client</span>=<span class="hljs-string">&quot;ca-pub-PUBLISHER-ID&quot;</span>
     <span class="hljs-attr">data-ad-slot</span>=<span class="hljs-string">&quot;AD-SLOT-CODE&quot;</span>
     <span class="hljs-attr">data-ad-format</span>=<span class="hljs-string">&quot;auto&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ins</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
(adsbygoogle = <span class="hljs-built_in">window</span>.adsbygoogle || []).push(</span></span><span class="hljs-template-variable">{}</span><span class="xml">);
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</span></code></pre>
<p>This is a typical advertising snippet from Adsense.  Clearly an adblocker knows that Adsense advertising loads from <code>googlesyndication.com</code> and can remove said code from the page preventing the advertisement from loading.</p>
<p>In such a case the HTML effectively becomes:</p>
<pre><code class="hljs">&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;advert&quot;</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p>In such a case, this jQuery expression will be true:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">if</span> <span class="hljs-params">($(selector)</span>.<span class="hljs-title">height</span><span class="hljs-params">()</span> === 0) { ... }
</span></code></pre>
<p>That&apos;s how the Adblock Checker works.</p>
<h1>Partial</h1>
<p>The key to this is in the partial, <code>adblock-checker.html.ejs</code>.  Use a different detection mechanism requires overriding this file.  As with any other partial in AkashaCMS, implement that same partial in your website containing whatever it is you want.</p>

  </article>
  <section id="right" class="col-sm-2">
    
    
<ul class="list-group">

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/gp/product/1785881507/ref=as_li_ss_il?ie=UTF8&amp;fpl=fresh&amp;pf_rd_m=ATVPDKIKX0DER&amp;pf_rd_s=&amp;pf_rd_r=6C1SVA4RRTWPTY7VN1Z2&amp;pf_rd_t=36701&amp;pf_rd_p=14bf09e4-93c8-43ff-8639-e7979e7d1787&amp;pf_rd_i=desktop&amp;linkCode=li2&amp;tag=davidherron-20&amp;linkId=1a83c9a47355206fbe8622bf9e90b086" target="_blank"><img border="0" src="https://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=1785881507&amp;Format=_SL250_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=techsparx-20" width="175"></a>
    </li>

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/Asynchronous-Node-js-JavaScript-Promises-Generators-ebook/dp/B01N2Z4SOR/ref=as_li_ss_tl?ie=UTF8&amp;qid=1498526267&amp;sr=8-1&amp;keywords=asynchronous+javascript+promises+generators&amp;linkCode=ll1&amp;tag=techsparx-20&amp;linkId=0b8a5dc44c97bf8eb8452dac15ae724b" target="_blank"><img border="0" src="https://techsparx.com/nodejs/img/es-2015-16-17-promises-generators-and-async-await-2-1000.jpg" width="175"></a>
    </li>

    <li class="list-group-item">
        <a rel="nofollow noskim" href="https://www.amazon.com/Creating-eBooks-Markdown-Source-Tools-ebook/dp/B00WTKDH72/ref=as_li_ss_tl?_encoding=UTF8&amp;psc=1&amp;refRID=4SGHASEAZJKJBV0G60R0&amp;linkCode=ll1&amp;tag=techsparx-20&amp;linkId=941071a7b25f067767f82a7b11c06968" target="_blank"><img border="0" src="https://techsparx.com/nodejs/img/create-ebook-cover.jpg" width="175"></a>
    </li>

</ul>
  </section>
</div>

</div>

<footer class="row" style="text-align: center; height: 100px;">
<!-- partial file-name="ebook-footer.html"/ -->

<div class="fb-like-box" data-href="http://www.facebook.com/Akashacms" data-width="125" data-height="250" data-show-faces="false" data-stream="false" data-header="true"></div>

</footer>
</div>

<script src="../../vendor/jquery/jquery.min.js"></script><script src="../../vendor/popper.js/umd/popper.min.js"></script><script src="../../vendor/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37003917-1']);
  _gaq.push(['_setDomainName', 'akashacms.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- partial file-name="piwik_analytics.html"></partial -->


</body>
</html>
